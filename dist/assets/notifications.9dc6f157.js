import{d as Ce,b as Ue,r as h,j as e,L as Ae,c as a,B as x,I as p,C as k,F as Te,Q as d}from"./index.cccf3715.js";import{F as Le}from"./Fileinput.2eb9162e.js";import{u as _e}from"./userApi.7e42f892.js";import{a as Ie}from"./imageApi.9b815a5c.js";const Fe=Ce.injectEndpoints({endpoints:c=>({createNotification:c.mutation({query:i=>({url:"/notifications/admin/notifications",method:"POST",body:i}),invalidatesTags:["Notification"]}),getAllNotifications:c.query({query:(i={})=>{const u=new URLSearchParams;return Object.keys(i).forEach(g=>{i[g]!==void 0&&i[g]!==""&&u.append(g,i[g])}),`/notifications/admin/notifications?${u.toString()}`},providesTags:["Notification"]}),getNotificationById:c.query({query:i=>`/notifications/admin/notifications/${i}`,providesTags:(i,u,g)=>[{type:"Notification",id:g}]}),updateNotification:c.mutation({query:({id:i,...u})=>({url:`/notifications/admin/notifications/${i}`,method:"PUT",body:u}),invalidatesTags:(i,u,{id:g})=>[{type:"Notification",id:g},"Notification"]}),deleteNotification:c.mutation({query:i=>({url:`/notifications/admin/notifications/${i}`,method:"DELETE"}),invalidatesTags:["Notification"]}),sendNotification:c.mutation({query:i=>({url:`/notifications/admin/notifications/${i}/send`,method:"POST"}),invalidatesTags:["Notification"]}),getNotificationStats:c.query({query:()=>"/notifications/admin/notifications/stats",providesTags:["Notification"]}),registerDeviceToken:c.mutation({query:i=>({url:"/notifications/notifications/register-token",method:"POST",body:i})}),updateNotificationPreferences:c.mutation({query:i=>({url:"/notifications/notifications/preferences",method:"PUT",body:i})})})}),{useCreateNotificationMutation:Pe,useGetAllNotificationsQuery:Me,useGetNotificationByIdQuery:Ge,useUpdateNotificationMutation:qe,useDeleteNotificationMutation:je,useSendNotificationMutation:Oe,useGetNotificationStatsQuery:De,useRegisterDeviceTokenMutation:Qe,useUpdateNotificationPreferencesMutation:ze}=Fe,He=()=>{var B,G,Q,z,H,W,J,K,V,X,Y,Z;Ue();const[c,i]=h.exports.useState("list"),[u,g]=h.exports.useState(!1),[ee,C]=h.exports.useState(!1),[te,U]=h.exports.useState(null),[I,A]=h.exports.useState([]),[F,ae]=h.exports.useState(""),[re,N]=h.exports.useState(null),[P,v]=h.exports.useState(null),[j,O]=h.exports.useState(!1),[w,T]=h.exports.useState({status:"",type:"",priority:"",search:""}),{data:M,isLoading:le,refetch:L}=Me({page:1,limit:50,...w}),{data:m}=De(),{data:o,isLoading:D,error:f}=_e();console.log("Users data:",o),console.log("Is loading users:",D),console.log("Users error:",f),console.log("Users data details:",o==null?void 0:o.details),console.log("Users data length:",(B=o==null?void 0:o.details)==null?void 0:B.length);const[ie,{isLoading:R}]=Pe(),[se,{isLoading:$}]=qe(),[ne,{isLoading:oe}]=je(),[de,{isLoading:ce}]=Oe(),[ge]=Ie(),[n,S]=h.exports.useState({title:"",message:"",type:"general",priority:"normal",targetAudience:"all",targetUsers:[],targetSegment:"all_users",imageUrl:"",actionUrl:"",actionType:"open_app",screenName:"",scheduledAt:"",metadata:{}}),y=t=>{const{name:l,value:r}=t.target;S(s=>({...s,[l]:r}))},ue=async t=>{var r,s;const l=t.target.files[0];if(!!l){if(!l.type.startsWith("image/")){d.error("Please select a valid image file");return}if(l.size>5*1024*1024){d.error("Image size should be less than 5MB");return}N(l),v(URL.createObjectURL(l)),O(!0);try{const b=new FormData;b.append("image",l);const q=await ge(b).unwrap();q.success&&((r=q.data)==null?void 0:r.url)?(S(Se=>({...Se,imageUrl:q.data.url})),d.success("Image uploaded successfully")):(d.error("Failed to upload image"),N(null),v(null))}catch(b){console.error("Image upload error:",b),d.error(((s=b==null?void 0:b.data)==null?void 0:s.message)||"Failed to upload image"),N(null),v(null)}finally{O(!1)}}},E=()=>{N(null),v(null),S(t=>({...t,imageUrl:""}))},me=t=>{A(l=>l.includes(t)?l.filter(r=>r!==t):[...l,t])},he=()=>{o!=null&&o.details&&A(o.details.map(t=>t._id))},pe=()=>{A([])},ye=async t=>{var r;if(t.preventDefault(),console.log("Creating notification with data:",n),!n.title||!n.message){d.error("Title and message are required");return}const l={...n,targetUsers:n.targetAudience==="specific_users"?I:[]};try{const s=await ie(l).unwrap();console.log("Create notification response:",s),s.status?(d.success("Notification created successfully"),g(!1),_(),A([]),L()):d.error(s.message||"Failed to create notification")}catch(s){console.error("Create notification error:",s);const b=((r=s==null?void 0:s.data)==null?void 0:r.message)||(s==null?void 0:s.message)||"Failed to create notification";d.error(b)}},be=async t=>{var l;t.preventDefault();try{(await se({id:te._id,...n}).unwrap()).status&&(d.success("Notification updated successfully"),C(!1),U(null),_(),L())}catch(r){console.error("Update notification error:",r);const s=((l=r==null?void 0:r.data)==null?void 0:l.message)||(r==null?void 0:r.message)||"Failed to update notification";d.error(s)}},fe=async t=>{var l;if(window.confirm("Are you sure you want to delete this notification?"))try{(await ne(t).unwrap()).status&&(d.success("Notification deleted successfully"),L())}catch(r){console.error("Delete notification error:",r);const s=((l=r==null?void 0:r.data)==null?void 0:l.message)||(r==null?void 0:r.message)||"Failed to delete notification";d.error(s)}},xe=async t=>{var l;if(window.confirm("Are you sure you want to send this notification?"))try{const r=await de(t).unwrap();r.status&&(d.success(`Notification sent successfully to ${r.data.sentCount} devices`),L())}catch(r){console.error("Send notification error:",r);const s=((l=r==null?void 0:r.data)==null?void 0:l.message)||(r==null?void 0:r.message)||"Failed to send notification";d.error(s)}},Ne=t=>{U(t),S({title:t.title,message:t.message,type:t.type,priority:t.priority,targetAudience:t.targetAudience,targetUsers:t.targetUsers||[],targetSegment:t.targetSegment,imageUrl:t.imageUrl||"",actionUrl:t.actionUrl||"",actionType:t.actionType,screenName:t.screenName||"",scheduledAt:t.scheduledAt?new Date(t.scheduledAt).toISOString().slice(0,16):"",metadata:t.metadata||{}}),t.imageUrl?(v(t.imageUrl),N(null)):(v(null),N(null)),C(!0)},_=()=>{S({title:"",message:"",type:"general",priority:"normal",targetAudience:"all",targetUsers:[],targetSegment:"all_users",imageUrl:"",actionUrl:"",actionType:"open_app",screenName:"",scheduledAt:"",metadata:{}}),N(null),v(null)},ve=t=>{const l={draft:{color:"bg-gray-100 text-gray-800",label:"Draft"},scheduled:{color:"bg-blue-100 text-blue-800",label:"Scheduled"},sent:{color:"bg-green-100 text-green-800",label:"Sent"},failed:{color:"bg-red-100 text-red-800",label:"Failed"},cancelled:{color:"bg-yellow-100 text-yellow-800",label:"Cancelled"}},r=l[t]||l.draft;return e("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.color}`,children:r.label})},ke=t=>{const l={low:{color:"bg-gray-100 text-gray-800",label:"Low"},normal:{color:"bg-blue-100 text-blue-800",label:"Normal"},high:{color:"bg-orange-100 text-orange-800",label:"High"},urgent:{color:"bg-red-100 text-red-800",label:"Urgent"}},r=l[t]||l.normal;return e("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.color}`,children:r.label})},we=[{id:"list",label:"All Notifications",icon:"ph:list"},{id:"stats",label:"Statistics",icon:"ph:chart-bar"}];return le?e("div",{className:"flex justify-center items-center h-64",children:e(Ae,{})}):a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-between items-center",children:[a("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Push Notifications"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and send push notifications to users"})]}),a(x,{onClick:()=>{console.log("Create Notification button clicked"),g(!0)},className:"btn btn-primary",children:[e(p,{icon:"ph:plus",className:"mr-2"}),"Create Notification"]})]}),e("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:we.map(t=>a("button",{onClick:()=>i(t.id),className:`flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ${c===t.id?"bg-white text-blue-700 dark:bg-gray-700 dark:text-blue-400 shadow-sm":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"}`,children:[e(p,{icon:t.icon,className:"mr-2"}),t.label]},t.id))}),c==="stats"&&a("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(k,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-blue-100 rounded-lg",children:e(p,{icon:"ph:bell",className:"text-2xl text-blue-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Notifications"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((Q=(G=m==null?void 0:m.data)==null?void 0:G.overview)==null?void 0:Q.totalNotifications)||0})]})]})})}),e(k,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-green-100 rounded-lg",children:e(p,{icon:"ph:check-circle",className:"text-2xl text-green-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sent"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((H=(z=m==null?void 0:m.data)==null?void 0:z.overview)==null?void 0:H.sentNotifications)||0})]})]})})}),e(k,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e(p,{icon:"ph:clock",className:"text-2xl text-yellow-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Scheduled"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((J=(W=m==null?void 0:m.data)==null?void 0:W.overview)==null?void 0:J.scheduledNotifications)||0})]})]})})}),e(k,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-gray-100 rounded-lg",children:e(p,{icon:"ph:file-text",className:"text-2xl text-gray-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Draft"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((V=(K=m==null?void 0:m.data)==null?void 0:K.overview)==null?void 0:V.draftNotifications)||0})]})]})})})]}),c==="list"&&a("div",{className:"space-y-6",children:[e(k,{children:e("div",{className:"p-6",children:a("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a("select",{value:w.status,onChange:t=>T(l=>({...l,status:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Status"}),e("option",{value:"draft",children:"Draft"}),e("option",{value:"scheduled",children:"Scheduled"}),e("option",{value:"sent",children:"Sent"}),e("option",{value:"failed",children:"Failed"}),e("option",{value:"cancelled",children:"Cancelled"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),a("select",{value:w.type,onChange:t=>T(l=>({...l,type:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Types"}),e("option",{value:"general",children:"General"}),e("option",{value:"promotional",children:"Promotional"}),e("option",{value:"order_update",children:"Order Update"}),e("option",{value:"system",children:"System"}),e("option",{value:"security",children:"Security"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a("select",{value:w.priority,onChange:t=>T(l=>({...l,priority:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Priorities"}),e("option",{value:"low",children:"Low"}),e("option",{value:"normal",children:"Normal"}),e("option",{value:"high",children:"High"}),e("option",{value:"urgent",children:"Urgent"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e("input",{type:"text",value:w.search,onChange:t=>T(l=>({...l,search:t.target.value})),placeholder:"Search notifications...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]})})}),e(k,{children:e("div",{className:"p-6",children:e("div",{className:"space-y-4",children:(Y=(X=M==null?void 0:M.data)==null?void 0:X.notifications)==null?void 0:Y.map(t=>e("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a("div",{className:"flex items-start justify-between",children:[a("div",{className:"flex-1",children:[a("div",{className:"flex items-center space-x-3 mb-2",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t.title}),ve(t.status),ke(t.priority)]}),e("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:t.message}),a("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a("span",{children:["Type: ",t.type]}),a("span",{children:["Target: ",t.targetAudience]}),a("span",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),t.sentAt&&a("span",{children:["Sent: ",new Date(t.sentAt).toLocaleDateString()]})]}),t.sentCount>0&&a("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["Sent to ",t.sentCount," devices",t.deliveredCount>0&&a("span",{children:[" \u2022 Delivered: ",t.deliveredCount]}),t.clickedCount>0&&a("span",{children:[" \u2022 Clicks: ",t.clickedCount]})]})]}),a("div",{className:"flex items-center space-x-2",children:[t.status==="draft"&&a(Te,{children:[a(x,{onClick:()=>Ne(t),className:"btn btn-sm btn-outline",children:[e(p,{icon:"ph:pencil",className:"mr-1"}),"Edit"]}),a(x,{onClick:()=>xe(t._id),disabled:ce,className:"btn btn-sm btn-primary",children:[e(p,{icon:"ph:paper-plane",className:"mr-1"}),"Send"]})]}),a(x,{onClick:()=>fe(t._id),disabled:oe,className:"btn btn-sm btn-outline-danger",children:[e(p,{icon:"ph:trash",className:"mr-1"}),"Delete"]})]})]})},t._id))})})})]}),(u||ee)&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[a("div",{className:"flex justify-between items-center mb-6",children:[e("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"Create Notification":"Edit Notification"}),e(x,{onClick:()=>{g(!1),C(!1),U(null),_()},className:"btn btn-outline",children:e(p,{icon:"ph:x"})})]}),a("form",{onSubmit:u?ye:be,children:[a("div",{className:"space-y-4",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e("input",{type:"text",name:"title",value:n.title,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),a("select",{name:"type",value:n.type,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"general",children:"General"}),e("option",{value:"promotional",children:"Promotional"}),e("option",{value:"order_update",children:"Order Update"}),e("option",{value:"system",children:"System"}),e("option",{value:"security",children:"Security"})]})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),e("textarea",{name:"message",value:n.message,onChange:y,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0})]}),a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a("select",{name:"priority",value:n.priority,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"low",children:"Low"}),e("option",{value:"normal",children:"Normal"}),e("option",{value:"high",children:"High"}),e("option",{value:"urgent",children:"Urgent"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Audience"}),a("select",{name:"targetAudience",value:n.targetAudience,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"all",children:"All Users"}),e("option",{value:"specific_users",children:"Specific Users"}),e("option",{value:"user_segment",children:"User Segment"})]})]})]}),n.targetAudience==="specific_users"&&a("div",{className:"mt-4",children:[a("div",{className:"flex justify-between items-center mb-3",children:[a("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select Users (",I.length," selected)"]}),a("div",{className:"space-x-2",children:[e("button",{type:"button",onClick:he,className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Select All"}),e("button",{type:"button",onClick:pe,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Deselect All"})]})]}),e("div",{className:"mb-3",children:e("input",{type:"text",placeholder:"Search users...",value:F,onChange:t=>ae(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})}),e("div",{className:"max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg",children:D?e("div",{className:"p-4 text-center text-gray-500",children:"Loading users..."}):f?a("div",{className:"p-4 text-center text-red-500",children:["Error loading users: ",((Z=f==null?void 0:f.data)==null?void 0:Z.message)||(f==null?void 0:f.message)||"Unknown error"]}):(o==null?void 0:o.details)&&o.details.length>0?o.details.filter(t=>{var l,r;return((l=t.name)==null?void 0:l.toLowerCase().includes(F.toLowerCase()))||((r=t.email)==null?void 0:r.toLowerCase().includes(F.toLowerCase()))}).map(t=>a("div",{className:"flex items-center p-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e("input",{type:"checkbox",id:`user-${t._id}`,checked:I.includes(t._id),onChange:()=>me(t._id),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a("div",{className:"flex-1",children:[e("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name||"No Name"}),e("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]},t._id)):e("div",{className:"p-4 text-center text-gray-500",children:o?"No users found":"Failed to load users"})})]}),a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Action Type"}),a("select",{name:"actionType",value:n.actionType,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"open_app",children:"Open App"}),e("option",{value:"open_url",children:"Open URL"}),e("option",{value:"open_screen",children:"Open Screen"}),e("option",{value:"none",children:"None"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Scheduled At"}),e("input",{type:"datetime-local",name:"scheduledAt",value:n.scheduledAt,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),n.actionType==="open_url"&&a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Action URL"}),e("input",{type:"url",name:"actionUrl",value:n.actionUrl,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),n.actionType==="open_screen"&&a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screen Name"}),e("input",{type:"text",name:"screenName",value:n.screenName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification Image"}),a("div",{className:"space-y-3",children:[e(Le,{selectedFile:re,onChange:ue,preview:!0,id:"notification-image-upload",children:e(x,{div:!0,icon:"ph:upload",text:j?"Uploading...":"Upload Image",iconClass:"text-xl",className:"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 text-gray-600 btn-sm",disabled:j})}),P&&a("div",{className:"relative inline-block",children:[e("div",{className:"w-48 h-48 border-2 border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:e("img",{src:P,alt:"Notification preview",className:"w-full h-full object-cover"})}),e("button",{type:"button",onClick:E,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",title:"Remove image",children:e(p,{icon:"ph:x",className:"text-sm"})})]}),n.imageUrl&&!P&&a("div",{className:"mt-2",children:[e("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Image URL:"}),a("div",{className:"flex items-center space-x-2",children:[e("input",{type:"text",value:n.imageUrl,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800 text-sm"}),e("button",{type:"button",onClick:E,className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Remove"})]})]})]})]})]}),a("div",{className:"flex justify-end space-x-3 mt-6",children:[e(x,{type:"button",onClick:()=>{g(!1),C(!1),U(null),_()},className:"btn btn-outline",children:"Cancel"}),e(x,{type:"submit",disabled:u?R:$,className:"btn btn-primary",children:u?R?"Creating...":"Create":$?"Updating...":"Update"})]})]})]})})]})};export{He as default};
