import{a7 as v,r as p,an as I,b as j,ao as k,c as q,j as s,I as C,B as N,ap as R,Q as t}from"./index.51fda1b3.js";import{I as f}from"./InputGroup.b9a8b3e7.js";import{u as B}from"./index.esm.d0a53d04.js";import{c as F,a as g,o as V}from"./object.de0310d9.js";import{C as A}from"./Checkbox.83acd8b2.js";const D=F({email:g().email("Invalid email").required("Email is Required"),password:g().required("Password is Required")}).required(),U=()=>{const{login:h}=v(),[r,i]=p.exports.useState(!1),b=I(),{register:l,reset:E,formState:{errors:n},handleSubmit:w}=B({resolver:V(D),mode:"all"}),L=j(),x=k(),y=async c=>{var m,d,u;console.log("Login data:",c,"Remember me:",a),i(!0);try{const e=await h(c,a);if(e.success){b(R(e.data.admin)),t.success("Login Successful");const o=((d=(m=x.state)==null?void 0:m.from)==null?void 0:d.pathname)||"/dashboard";L(o,{replace:!0})}else t.error(e.error||"Login failed")}catch(e){console.error("Login error:",e);const o=((u=e==null?void 0:e.data)==null?void 0:u.message)||(e==null?void 0:e.message)||"Login failed";t.error(o)}finally{i(!1)}},[a,S]=p.exports.useState(!1);return q("form",{onSubmit:w(y),className:"space-y-4 ",children:[s(f,{name:"email",type:"email",label:"email",placeholder:"email",prepend:"@",defaultValue:"Chandran@preciousjewels.com",register:l,error:n.email,merged:!0,disabled:r}),s(f,{name:"password",label:"password",type:"password",placeholder:"password",prepend:s(C,{icon:"ph:lock-simple"}),defaultValue:"Test@1234",register:l,error:n.password,merged:!0,disabled:r}),s("div",{className:"flex justify-between",children:s(A,{value:a,onChange:()=>S(!a),label:"Remember me"})}),s(N,{type:"submit",text:"Sign in",className:"btn btn-primary block w-full text-center ",isLoading:r})]})};export{U as L};
