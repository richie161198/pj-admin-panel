import{a4 as L,b as T,r as O,j as a,L as F,c as t,B as i,I as d,Q as o}from"./index.67c6c4a2.js";import{d as E,e as U,f as J}from"./authApiSlice.0d352f0e.js";const R=()=>{var N,b,f,k,v,w,P;const{id:l}=L(),g=T(),[p,D]=O.exports.useState(0),{data:s,isLoading:y,error:m,refetch:h}=E(l),[x,{isLoading:u}]=U(),[j,{isLoading:A}]=J();console.log("API Call Debug:",{id:l,isLoading:y,error:m,productResponse:s,url:`/commerce/singleProduct/${l}`});let e=null;(s==null?void 0:s.products)&&Array.isArray(s.products)?e=s.products[0]:s!=null&&s.product?e=s.product:s&&!s.products&&(e=s),console.log("Product Details:",e),console.log("Product Response:",s);const C=async()=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await j(l).unwrap(),o.success("Product deleted successfully"),g("/products")}catch{o.error("Failed to delete product")}},S=async()=>{try{await x({id:l,active:!e.active}).unwrap(),o.success(`Product ${e.active?"deactivated":"activated"} successfully`),h()}catch{o.error("Failed to update product status")}},I=async()=>{try{await x({id:l,trending:!e.trending}).unwrap(),o.success(`Product ${e.trending?"removed from":"added to"} trending`),h()}catch{o.error("Failed to update trending status")}},$=async()=>{try{await x({id:l,popular:!e.popular}).unwrap(),o.success(`Product ${e.popular?"removed from":"added to"} popular`),h()}catch{o.error("Failed to update popular status")}};return y?a("div",{className:"flex justify-center items-center h-64",children:a(F,{})}):m?(console.error("Product Details Error:",m),t("div",{className:"text-center py-8",children:[t("p",{className:"text-red-500",children:["Error loading product: ",m.message]}),t("p",{className:"text-sm text-gray-500 mt-2",children:["Product ID: ",l]}),t("p",{className:"text-sm text-gray-500",children:["Status: ",m.status]}),t("p",{className:"text-sm text-gray-500",children:["Data: ",JSON.stringify(m.data)]}),t("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-left",children:[a("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full Error:"}),a("pre",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 overflow-auto",children:JSON.stringify(m,null,2)})]}),t("div",{className:"flex space-x-2 mt-4",children:[a(i,{onClick:()=>h(),className:"btn btn-primary",children:"Retry"}),a(i,{onClick:()=>g("/products"),className:"btn btn-outline",children:"Back to Products"})]})]})):e?(console.log("Final Product Check:",{product:e,hasProduct:!!e,productKeys:e?Object.keys(e):[],productId:e==null?void 0:e._id,productName:e==null?void 0:e.name}),t("div",{className:"space-y-6",children:[t("div",{className:"flex justify-between items-center",children:[t("div",{className:"flex items-center space-x-4",children:[t(i,{onClick:()=>g("/products"),className:"btn btn-outline",children:[a(d,{icon:"ph:arrow-left",className:"mr-2"}),"Back"]}),t("div",{children:[a("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Product Details"}),a("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage product information"})]})]}),t("div",{className:"flex space-x-3",children:[t(i,{onClick:()=>g(`/products/${l}/edit`),className:"btn btn-outline-secondary",children:[a(d,{icon:"ph:pencil",className:"mr-2"}),"Edit"]}),t(i,{onClick:S,disabled:u,className:`btn ${e.active?"btn-outline-warning":"btn-outline-success"}`,children:[a(d,{icon:e.active?"ph:pause":"ph:play",className:"mr-2"}),e.active?"Deactivate":"Activate"]}),t(i,{onClick:C,disabled:A,className:"btn btn-outline-danger",children:[a(d,{icon:"ph:trash",className:"mr-2"}),"Delete"]})]})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"lg:col-span-2 space-y-6",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Images"}),e.images&&e.images.length>0?t("div",{className:"space-y-4",children:[a("div",{className:"aspect-square bg-gray-100 dark:bg-slate-700 rounded-lg overflow-hidden",children:a("img",{src:e.images[p],alt:e.name,className:"w-full h-full object-cover"})}),e.images.length>1&&a("div",{className:"flex space-x-2 overflow-x-auto",children:e.images.map((r,c)=>a("button",{onClick:()=>D(c),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 ${p===c?"border-blue-500":"border-gray-200 dark:border-gray-600"}`,children:a("img",{src:r,alt:`${e.name} ${c+1}`,className:"w-full h-full object-cover"})},c))})]}):a("div",{className:"aspect-square bg-gray-100 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:a(d,{icon:"ph:image",className:"text-6xl text-gray-400"})})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[t("div",{className:"flex justify-between items-start mb-4",children:[t("div",{children:[a("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),a("p",{className:"text-gray-600 dark:text-gray-400",children:e.brand}),t("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["SKU: ",e.skuId]})]}),t("div",{className:"flex flex-wrap gap-2",children:[a("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${e.active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.active?"Active":"Inactive"}),e.trending&&a("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Trending"}),e.popular&&a("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Popular"})]})]}),t("div",{className:"flex items-center mb-4",children:[a("div",{className:"flex items-center",children:[...Array(5)].map((r,c)=>{var n;return a(d,{icon:"ph:star-fill",className:`w-5 h-5 ${c<Math.floor(((n=e.rating)==null?void 0:n.value)||0)?"text-yellow-400":"text-gray-300"}`},c)})}),t("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:[((N=e.rating)==null?void 0:N.value)||0," (",((b=e.rating)==null?void 0:b.count)||0," reviews)"]})]}),t("div",{className:"mb-6",children:[a("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),a("p",{className:"text-gray-600 dark:text-gray-400",children:e.description||"No description available"})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Category"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:e.categories||"N/A"})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Stock"}),t("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[e.stock||0," units"]})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Selected Carat"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:e.selectedCaret||"N/A"})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Carat Options"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:((f=e.caretOptions)==null?void 0:f.join(", "))||"N/A"})]})]}),e.productDetails&&e.productDetails.length>0&&t("div",{className:"mb-6",children:[a("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Specifications"}),a("div",{className:"space-y-3",children:e.productDetails.map((r,c)=>t("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[t("h5",{className:"font-medium text-gray-900 dark:text-white",children:[r.type,": ",r.name]}),r.attributes&&a("div",{className:"mt-2 grid grid-cols-2 gap-2",children:Object.entries(r.attributes).map(([n,B])=>t("div",{children:[t("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:[n.replace(/([A-Z])/g," $1").trim(),":"]}),a("span",{className:"text-sm text-gray-900 dark:text-white ml-1",children:B})]},n))})]},c))})]})]})]}),t("div",{className:"space-y-6",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Pricing Information"}),t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Selling Price"}),t("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["\u20B9",((k=e.sellingprice)==null?void 0:k.toLocaleString())||0]})]}),e.total&&e.total!==e.sellingprice&&t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Price"}),t("span",{className:"text-sm text-gray-900 dark:text-white line-through",children:["\u20B9",e.total.toLocaleString()]})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"GST"}),t("span",{className:"text-sm text-gray-900 dark:text-white",children:["\u20B9",e.gst||0]})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Weight"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:((v=e.subtotal)==null?void 0:v.weight)||"N/A"})]})]}),e.priceDetails&&e.priceDetails.length>0&&t("div",{className:"mt-6",children:[a("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Price Breakdown"}),a("div",{className:"space-y-2",children:e.priceDetails.map((r,c)=>{var n;return t("div",{className:"flex justify-between text-sm",children:[t("span",{className:"text-gray-500 dark:text-gray-400",children:[r.name," ",r.weight&&`(${r.weight})`]}),t("span",{className:"text-gray-900 dark:text-white",children:["\u20B9",((n=r.value)==null?void 0:n.toLocaleString())||0]})]},c)})})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),t("div",{className:"space-y-3",children:[t(i,{onClick:I,disabled:u,className:`btn w-full justify-start ${e.trending?"btn-outline-warning":"btn-outline"}`,children:[a(d,{icon:e.trending?"ph:fire":"ph:fire-simple",className:"mr-2"}),e.trending?"Remove from Trending":"Add to Trending"]}),t(i,{onClick:$,disabled:u,className:`btn w-full justify-start ${e.popular?"btn-outline-success":"btn-outline"}`,children:[a(d,{icon:e.popular?"ph:heart-fill":"ph:heart",className:"mr-2"}),e.popular?"Remove from Popular":"Add to Popular"]}),t(i,{onClick:()=>g(`/products/${l}/edit`),className:"btn btn-outline w-full justify-start",children:[a(d,{icon:"ph:pencil",className:"mr-2"}),"Edit Product"]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Statistics"}),t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Updated"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"N/A"})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rating"}),t("span",{className:"text-sm text-gray-900 dark:text-white",children:[((w=e.rating)==null?void 0:w.value)||0,"/5"]})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reviews"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:((P=e.rating)==null?void 0:P.count)||0})]})]})]})]})]})]})):t("div",{className:"text-center py-8",children:[a("p",{className:"text-gray-500",children:"Product not found"}),t("p",{className:"text-sm text-gray-400 mt-2",children:["Product ID: ",l]}),t("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-left",children:[a("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Debug Info:"}),a("pre",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 overflow-auto",children:JSON.stringify(s,null,2)})]}),t("div",{className:"flex space-x-2 mt-4",children:[a(i,{onClick:()=>g("/products"),className:"btn btn-outline",children:"Back to Products"}),a(i,{onClick:()=>h(),className:"btn btn-primary",children:"Test API Call"})]})]})};export{R as default};
