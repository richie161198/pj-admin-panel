import{a4 as A,b as j,j as e,L as D,c as t,B as s,I as i,Q as n}from"./index.67c6c4a2.js";import{b as B,c as I,u as L}from"./authApiSlice.0d352f0e.js";const P=()=>{var h,x,g,u,N,f;const{id:r}=A(),l=j(),{data:c,isLoading:b,error:m,refetch:o}=B(r),[p,{isLoading:y}]=I(),[k,{isLoading:v}]=L(),a=(c==null?void 0:c.details)||c,w=async()=>{if(window.confirm("Are you sure you want to delete this customer? This action cannot be undone."))try{await k(r).unwrap(),n.success("Customer deleted successfully"),l("/customers")}catch{n.error("Failed to delete customer")}},C=async()=>{try{await p({id:r,active:!a.active}).unwrap(),n.success(`Customer ${a.active?"deactivated":"activated"} successfully`),o()}catch{n.error("Failed to update customer status")}};return b?e("div",{className:"flex justify-center items-center h-64",children:e(D,{})}):m?t("div",{className:"text-center py-8",children:[t("p",{className:"text-red-500",children:["Error loading customer: ",m.message]}),e(s,{onClick:()=>o(),className:"mt-4",children:"Retry"})]}):a?t("div",{className:"space-y-6",children:[t("div",{className:"flex justify-between items-center",children:[t("div",{className:"flex items-center space-x-4",children:[t(s,{onClick:()=>l("/customers"),className:"btn btn-outline",children:[e(i,{icon:"ph:arrow-left",className:"mr-2"}),"Back"]}),t("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Customer Details"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage customer information"})]})]}),t("div",{className:"flex space-x-3",children:[t(s,{onClick:()=>l(`/customers/${r}/edit`),className:"btn btn-outline-secondary",children:[e(i,{icon:"ph:pencil",className:"mr-2"}),"Edit"]}),t(s,{onClick:C,disabled:y,className:`btn ${a.active?"btn-outline-warning":"btn-outline-success"}`,children:[e(i,{icon:a.active?"ph:pause":"ph:play",className:"mr-2"}),a.active?"Deactivate":"Activate"]}),t(s,{onClick:w,disabled:v,className:"btn btn-outline-danger",children:[e(i,{icon:"ph:trash",className:"mr-2"}),"Delete"]})]})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"lg:col-span-2",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:t("div",{className:"flex items-start space-x-4",children:[e("div",{className:"flex-shrink-0",children:a.profilePhoto?e("img",{src:a.profilePhoto,alt:a.name,className:"h-20 w-20 rounded-full object-cover"}):e("div",{className:"h-20 w-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl font-bold",children:((x=(h=a.name)==null?void 0:h.charAt(0))==null?void 0:x.toUpperCase())||"C"})}),t("div",{className:"flex-1",children:[e("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a.name||"N/A"}),t("p",{className:"text-gray-600 dark:text-gray-400",children:["Customer ID: ",a._id]}),t("div",{className:"mt-2 flex flex-wrap gap-2",children:[e("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${a.active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:a.active?"Active":"Inactive"}),a.isBlocked&&e("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Blocked"}),a.mobileVerified&&e("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Mobile Verified"})]})]})]})}),t("div",{className:"mt-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Contact Information"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.email||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.phone||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Address"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.address&&a.address.length>0&&(((g=a.address.find(d=>d.isDefault))==null?void 0:g.street)||((u=a.address[0])==null?void 0:u.street))||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"City"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.address&&a.address.length>0&&(((N=a.address.find(d=>d.isDefault))==null?void 0:N.city)||((f=a.address[0])==null?void 0:f.city))||"N/A"})]})]})]}),t("div",{className:"mt-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Additional Information"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"App ID"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.appId||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Referral Code"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.referralCode||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Role"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.role||"N/A"})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Login"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.lastLogin?new Date(a.lastLogin).toLocaleDateString():"Never"})]})]})]})]}),t("div",{className:"space-y-6",children:[t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Stats"}),t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between",children:[e("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Balance"}),t("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["\u20B9",a.balance||0]})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gold Balance"}),t("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a.goldBalance||0," gm"]})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Account"}),e("span",{className:`text-sm font-medium ${a.activeAccount?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:a.activeAccount?"Yes":"No"})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile Verified"}),e("span",{className:`text-sm font-medium ${a.mobileVerified?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:a.mobileVerified?"Yes":"No"})]})]})]}),t("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),t("div",{className:"space-y-3",children:[t(s,{onClick:()=>l(`/customers/${r}/orders`),className:"btn btn-outline w-full justify-start",children:[e(i,{icon:"ph:shopping-bag",className:"mr-2"}),"View Orders"]}),t(s,{onClick:()=>l(`/customers/${r}/messages`),className:"btn btn-outline w-full justify-start",children:[e(i,{icon:"ph:chat-circle",className:"mr-2"}),"Send Message"]}),t(s,{onClick:()=>l(`/customers/${r}/edit`),className:"btn btn-outline w-full justify-start",children:[e(i,{icon:"ph:pencil",className:"mr-2"}),"Edit Profile"]})]})]})]})]})]}):t("div",{className:"text-center py-8",children:[e("p",{className:"text-gray-500",children:"Customer not found"}),e(s,{onClick:()=>l("/customers"),className:"mt-4",children:"Back to Customers"})]})};export{P as default};
