import{a1 as $,b as z,ae as V,a7 as H,r as h,af as J,ag as K,ah as W,j as e,L as X,c as a,I as d,B as l,C as b,Q as o}from"./index.cccf3715.js";const Z=()=>{var L,B;const{id:y}=$(),k=z(),[I]=V(),{user:f}=H(),U=I.get("edit")==="true",[p,N]=h.exports.useState(U),[E,u]=h.exports.useState(!1),[n,w]=h.exports.useState({name:"",email:"",role:"",department:"",phone:"",isActive:!0,permissions:[]}),[m,P]=h.exports.useState({newPassword:"",confirmPassword:""}),{data:v,isLoading:M,error:x,refetch:R}=J(y),[j,{isLoading:A}]=K(),[q,{isLoading:C}]=W(),t=(L=v==null?void 0:v.data)==null?void 0:L.admin;h.exports.useEffect(()=>{t&&w({name:t.name||"",email:t.email||"",role:t.role||"",department:t.department||"",phone:t.phone||"",isActive:t.isActive!==void 0?t.isActive:!0,permissions:t.permissions||[]})},[t]);const g=r=>{const{name:i,value:s,type:c,checked:O}=r.target;w(Q=>({...Q,[i]:c==="checkbox"?O:s}))},F=r=>{w(i=>({...i,permissions:i.permissions.includes(r)?i.permissions.filter(s=>s!==r):[...i.permissions,r]}))},S=r=>{const{name:i,value:s}=r.target;P(c=>({...c,[i]:s}))},G=async r=>{var i;if(r.preventDefault(),n.permissions.length===0){o.error("Please select at least one page access");return}try{await j({id:y,...n}).unwrap(),o.success("Admin updated successfully"),N(!1),u(!1),R()}catch(s){console.error("Update admin error:",s);const c=((i=s==null?void 0:s.data)==null?void 0:i.message)||(s==null?void 0:s.message)||"Failed to update admin";o.error(c)}},T=async r=>{var i;if(r.preventDefault(),m.newPassword!==m.confirmPassword){o.error("Passwords do not match");return}if(m.newPassword.length<8){o.error("Password must be at least 8 characters long");return}try{await q({id:y,newPassword:m.newPassword}).unwrap(),o.success("Password updated successfully"),u(!1),P({newPassword:"",confirmPassword:""})}catch(s){console.error("Update password error:",s);const c=((i=s==null?void 0:s.data)==null?void 0:i.message)||(s==null?void 0:s.message)||"Failed to update password";o.error(c)}},_=r=>{switch(r){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"moderator":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"support":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},D=[{id:"dashboard",label:"Dashboard",icon:"ph:house"},{id:"customers",label:"Customers",icon:"ph:users"},{id:"products",label:"Products",icon:"ph:package"},{id:"categories",label:"Categories",icon:"ph:folders"},{id:"banners",label:"Banners",icon:"ph:image-square"},{id:"orders",label:"Orders",icon:"ph:shopping-cart"},{id:"invoices",label:"Invoices",icon:"ph:receipt"},{id:"return-refunds",label:"Return & Refunds",icon:"ph:arrow-counter-clockwise"},{id:"investment-orders",label:"Investment Orders",icon:"ph:chart-line-up"},{id:"autopay-subscriptions",label:"Autopay Subscriptions",icon:"ph:repeat"},{id:"investment-invoices",label:"Investment Invoices",icon:"ph:receipt"},{id:"investment-settings",label:"Investment Settings",icon:"ph:gear-six"},{id:"shipment-settings",label:"Shipment Settings",icon:"ph:truck"},{id:"appointments",label:"Appointments",icon:"ph:calendar-check"},{id:"support-tickets",label:"Support Tickets",icon:"ph:ticket"},{id:"notifications",label:"Notifications",icon:"ph:bell"},{id:"referred-users",label:"Referred Users",icon:"ph:users"},{id:"admin-profile",label:"Admin Profile",icon:"ph:user-circle"},{id:"admin-list",label:"Admin List",icon:"ph:users-three"},{id:"maintenance",label:"Maintenance",icon:"ph:gear"},{id:"privacy-policy",label:"Privacy Policy",icon:"ph:lock"},{id:"return-policy",label:"Return Policy",icon:"ph:arrow-counter-clockwise"},{id:"shipping-policy",label:"Shipping Policy",icon:"ph:truck"},{id:"cancellation-policy",label:"Cancellation Policy",icon:"ph:x-circle"},{id:"grievance-policy",label:"Grievance Policy",icon:"ph:warning-circle"},{id:"digigold-redemption-policy",label:"Digital Gold & Redemption Policy",icon:"ph:coins"},{id:"terms-and-conditions",label:"Terms and Conditions",icon:"ph:file-text"}];return M?e("div",{className:"flex justify-center items-center h-64",children:e(X,{})}):x?a("div",{className:"text-center py-8",children:[e(d,{icon:"ph:warning",className:"mx-auto text-red-500 text-4xl mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Error Loading Admin"}),e("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:((B=x==null?void 0:x.data)==null?void 0:B.message)||"Failed to load admin details"}),a(l,{onClick:()=>k("/admin-list"),className:"btn btn-primary",children:[e(d,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Admin List"]})]}):t?a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-between items-center",children:[a("div",{children:[a(l,{onClick:()=>k("/admin-list"),className:"btn btn-outline mb-4",children:[e(d,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Admin List"]}),e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p?"Edit Admin":"Admin Details"}),e("p",{className:"text-gray-500 dark:text-gray-400",children:p?"Update admin information and permissions":"View admin details and activity"})]}),(f==null?void 0:f.role)==="super_admin"&&!p&&a("div",{className:"flex space-x-2",children:[a(l,{onClick:()=>N(!0),className:"btn btn-primary",children:[e(d,{icon:"ph:pencil",className:"mr-2"}),"Edit Admin"]}),a(l,{onClick:()=>u(!0),className:"btn btn-outline",children:[e(d,{icon:"ph:key",className:"mr-2"}),"Change Password"]})]})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a("div",{className:"lg:col-span-2",children:[e(b,{title:"Basic Information",children:p?a("form",{onSubmit:G,className:"space-y-4",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),e("input",{type:"text",name:"name",value:n.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),e("input",{type:"email",name:"email",value:n.email,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role *"}),a("select",{name:"role",value:n.role,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",children:[e("option",{value:"",children:"Select Role"}),e("option",{value:"admin",children:"Admin"}),e("option",{value:"moderator",children:"Moderator"}),e("option",{value:"support",children:"Support"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department"}),e("input",{type:"text",name:"department",value:n.department,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),e("input",{type:"tel",name:"phone",value:n.phone,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{className:"flex items-center",children:[e("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:g,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Active Account"})]})]}),a("div",{className:"flex justify-end space-x-2",children:[e(l,{type:"button",onClick:()=>N(!1),className:"btn btn-outline",children:"Cancel"}),e(l,{type:"submit",disabled:A,className:"btn btn-primary",children:A?"Updating...":"Update Admin"})]})]}):e("div",{className:"space-y-4",children:a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Name"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.name})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.email})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Role"}),e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(t.role)}`,children:t.role.replace("_"," ").toUpperCase()})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Department"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.department||"-"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.phone||"-"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.isActive?"Active":"Inactive"})]})]})})}),e(b,{title:"Page Access",className:"mt-6",children:p?e("div",{className:"space-y-4",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Page Access *"}),e("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Select which pages this admin can access"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 border border-gray-300 dark:border-gray-600 rounded-md p-4 bg-gray-50 dark:bg-gray-800",children:D.map(r=>a("label",{className:"flex items-center p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-700 cursor-pointer transition-colors",children:[e("input",{type:"checkbox",checked:n.permissions.includes(r.id),onChange:()=>F(r.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e(d,{icon:r.icon,className:"ml-3 text-lg text-gray-600 dark:text-gray-400"}),e("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:r.label})]},r.id))}),n.permissions.length===0&&e("p",{className:"text-xs text-red-500 dark:text-red-400 mt-2",children:"Please select at least one page access"})]})}):e("div",{className:"space-y-2",children:t.permissions&&t.permissions.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:D.filter(r=>t.permissions.includes(r.id)).map(r=>a("div",{className:"flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[e(d,{icon:r.icon,className:"text-lg text-gray-600 dark:text-gray-400"}),e("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:r.label})]},r.id))}):e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No permissions assigned"})})})]}),a("div",{className:"space-y-6",children:[e(b,{title:"Account Status",children:a("div",{className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.createdAt).toLocaleDateString()})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Login"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.lastLogin?new Date(t.lastLogin).toLocaleDateString():"Never"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Modified"}),e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString():"-"})]})]})}),t.createdBy&&e(b,{title:"Created By",children:a("div",{className:"space-y-2",children:[e("p",{className:"text-sm text-gray-900 dark:text-white",children:t.createdBy.name}),e("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.createdBy.email})]})})]})]}),E&&e("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:a("div",{className:"mt-3",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Change Password"}),a("form",{onSubmit:T,className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password *"}),e("input",{type:"password",name:"newPassword",value:m.newPassword,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password *"}),e("input",{type:"password",name:"confirmPassword",value:m.confirmPassword,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{className:"flex justify-end space-x-2",children:[e(l,{type:"button",onClick:()=>u(!1),className:"btn btn-outline",children:"Cancel"}),e(l,{type:"submit",disabled:C,className:"btn btn-primary",children:C?"Updating...":"Update Password"})]})]})]})})})]}):a("div",{className:"text-center py-8",children:[e(d,{icon:"ph:user-x",className:"mx-auto text-gray-400 text-4xl mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Admin Not Found"}),e("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"The requested admin account could not be found."}),a(l,{onClick:()=>k("/admin-list"),className:"btn btn-primary",children:[e(d,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Admin List"]})]})};export{Z as default};
