import{Z as xe,b as pe,r as b,Q as _,j as t,L as se,c as s,B as j,I as o,C as w}from"./index.cccf3715.js";import{B as O}from"./Badge.5f9dcbff.js";import{u as fe,a as ye,b as ke,c as be,d as Ne}from"./ticketApi.1b387c6b.js";import{l as we}from"./index.6a354765.js";class ve{constructor(){this.socket=null,this.isConnected=!1,this.listeners=new Map}connect(){if(this.socket&&this.isConnected)return;const r=xe();if(!r){console.error("Socket: No token found");return}const x="https://www.preciousgoldsmith.net/api/v0".replace("/api/v0","").replace("/api/v0/","");this.socket=we(x,{transports:["websocket"],auth:{token:r},query:{token:r},extraHeaders:{Authorization:`Bearer ${r}`},autoConnect:!0}),this.socket.on("connect",()=>{console.log("Socket: Connected"),this.isConnected=!0,this.listeners.has("connect")&&this.listeners.get("connect").forEach(h=>h())}),this.socket.on("disconnect",()=>{console.log("Socket: Disconnected"),this.isConnected=!1,this.listeners.has("disconnect")&&this.listeners.get("disconnect").forEach(h=>h())}),this.socket.on("error",h=>{console.error("Socket: Error",h),this.listeners.has("error")&&this.listeners.get("error").forEach(S=>S(h))}),this.socket.on("connect_error",h=>{console.error("Socket: Connection error",h),this.listeners.has("error")&&this.listeners.get("error").forEach(S=>S(h))})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.listeners.clear())}on(r,m){if(!this.socket){console.error("Socket: Not connected, cannot listen to",r);return}this.socket.on(r,m),this.listeners.has(r)||this.listeners.set(r,[]),this.listeners.get(r).push(m)}off(r,m){if(this.socket&&(m?this.socket.off(r,m):this.socket.off(r)),this.listeners.has(r))if(m){const x=this.listeners.get(r),h=x.indexOf(m);h>-1&&x.splice(h,1)}else this.listeners.delete(r)}emit(r,m){if(!this.socket||!this.isConnected){console.error("Socket: Not connected, cannot emit",r);return}this.socket.emit(r,m)}joinTicket(r){this.emit("join_ticket",r)}leaveTicket(r){}sendTicketMessage(r,m,x=!1){this.emit("send_ticket_message",{ticketId:r,message:m,isInternal:x})}updateTicketStatus(r,m,x=null){this.emit("update_ticket_status",{ticketId:r,status:m,adminNote:x})}sendTypingIndicator(r,m){this.emit("ticket_typing",{ticketId:r,isTyping:m})}}const l=new ve,Ae=()=>{var J,Y,Z,K;const W=pe(),[r,m]=b.exports.useState(null),[x,h]=b.exports.useState(""),[S,T]=b.exports.useState(!1),[k,z]=b.exports.useState(!1),[R,v]=b.exports.useState(null),G=b.exports.useRef(null),C=b.exports.useRef(null),[U,E]=b.exports.useState(new Set),[f,re]=b.exports.useState({status:"",category:"",page:1,limit:10}),{data:ae,isLoading:ie,refetch:I}=fe(f),Q=r==null?void 0:r._id,{data:P,isLoading:ne,refetch:B}=ye(Q,{skip:!Q}),{data:$,isLoading:_e}=ke(),[le,{isLoading:D}]=be(),[ce,{isLoading:F}]=Ne(),de=e=>{if(!e)return{tickets:[],pagination:null};if(Array.isArray(e))return{tickets:e,pagination:null};if(e.data){if(Array.isArray(e.data))return{tickets:e.data,pagination:null};if(e.data.tickets&&Array.isArray(e.data.tickets))return{tickets:e.data.tickets,pagination:e.data.pagination||null}}return e.tickets&&Array.isArray(e.tickets)?{tickets:e.tickets,pagination:e.pagination||null}:e.details&&Array.isArray(e.details)?{tickets:e.details,pagination:null}:{tickets:[],pagination:null}},{tickets:oe,pagination:y}=de(ae),V=[...oe].sort((e,a)=>{const n=U.has(e._id),d=U.has(a._id);return n&&!d?-1:!n&&d?1:new Date(a.createdAt)-new Date(e.createdAt)}),i=R||(P==null?void 0:P.ticket)||null,A=($==null?void 0:$.data)||$;b.exports.useEffect(()=>(l.connect(),l.on("connect",()=>{z(!0)}),l.on("disconnect",()=>{z(!1)}),l.on("joined_ticket",e=>{console.log("Joined ticket:",e)}),l.on("ticket_data",e=>{e&&e.ticket&&v(e.ticket)}),l.on("new_ticket_message",e=>{e&&e.reply&&(e.ticketId===(r==null?void 0:r._id)?(v(a=>{var g,u;if(!a)return a;const n=(a.replies||[]).filter(p=>{var N;return!((N=p._id)!=null&&N.startsWith("temp_"))}),d={...e.reply,_id:e.reply._id||e.reply.id||Date.now().toString(),timestamp:e.reply.timestamp||new Date().toISOString(),repliedBy:e.sender?{_id:e.sender.id,name:e.sender.name,role:e.sender.role}:e.reply.repliedBy||((u=(g=a.replies)==null?void 0:g[a.replies.length-1])==null?void 0:u.repliedBy)};return n.some(p=>p._id===d._id||p.message===d.message&&Math.abs(new Date(p.timestamp)-new Date(d.timestamp))<5e3)?a:{...a,replies:[...n,d]}}),setTimeout(()=>{var a;(a=C.current)==null||a.scrollIntoView({behavior:"smooth"})},100),B()):E(a=>new Set([...a,e.ticketId])),I())}),l.on("ticket_status_updated",e=>{e&&e.ticketId===(r==null?void 0:r._id)&&e.ticket&&(v(e.ticket),B(),I(),_.success(`Ticket status updated to ${e.ticket.status}`))}),l.on("new_ticket_reply",e=>{e&&e.ticketId&&e.ticket&&(e.ticketId!==(r==null?void 0:r._id)&&(E(a=>new Set([...a,e.ticketId])),_.info(`New reply on ticket: ${e.ticket.subject||"Unknown"}`)),I())}),l.on("error",e=>{const a=(e==null?void 0:e.message)||(e==null?void 0:e.toString())||"Socket error occurred";_.error(a),console.error("Socket error:",e)}),()=>{r&&l.leaveTicket(r._id),l.off("connect"),l.off("disconnect"),l.off("joined_ticket"),l.off("ticket_data"),l.off("new_ticket_message"),l.off("ticket_status_updated"),l.off("new_ticket_reply"),l.off("error")}),[r==null?void 0:r._id]),b.exports.useEffect(()=>{(i==null?void 0:i.replies)&&C.current&&setTimeout(()=>{var e;(e=C.current)==null||e.scrollIntoView({behavior:"smooth"})},100)},[(J=i==null?void 0:i.replies)==null?void 0:J.length]);const me=e=>{r&&l.leaveTicket(r._id),m(e),h(""),T(!1),v(null),E(a=>{const n=new Set(a);return n.delete(e._id),n}),e&&k&&l.joinTicket(e._id),setTimeout(()=>{var a;(a=C.current)==null||a.scrollIntoView({behavior:"smooth"})},100)},H=async(e,a,n="")=>{var d;if(k)l.updateTicketStatus(e,a,n);else try{const c=await le({ticketId:e,status:a,adminNote:n}).unwrap();_.success(`Ticket status updated to ${a}`),I(),(r==null?void 0:r._id)===e&&B()}catch(c){console.error("Failed to update ticket status:",c),_.error(((d=c==null?void 0:c.data)==null?void 0:d.message)||"Failed to update ticket status")}},he=async e=>{var c;if(e.preventDefault(),!x.trim()||!(r!=null&&r._id))return;const a=x.trim(),n=S,d=`temp_${Date.now()}`;if(R){const g={_id:d,message:a,timestamp:new Date().toISOString(),repliedBy:{_id:"admin",name:"You",role:"admin"},isInternal:n};v(u=>({...u,replies:[...u.replies||[],g]})),setTimeout(()=>{var u;(u=C.current)==null||u.scrollIntoView({behavior:"smooth"})},50)}if(h(""),T(!1),k)l.sendTicketMessage(r._id,a,n);else try{const g=await ce({ticketId:r._id,message:a,isInternal:n}).unwrap();R&&g.ticket&&v(u=>({...u,replies:[...(u.replies||[]).filter(p=>{var N;return!((N=p._id)!=null&&N.startsWith("temp_"))}),...g.ticket.replies||[]]})),_.success(n?"Internal note added successfully":"Reply sent successfully"),B(),I()}catch(g){console.error("Failed to add reply:",g),_.error(((c=g==null?void 0:g.data)==null?void 0:c.message)||"Failed to add reply"),R&&v(u=>{var p;return{...u,replies:((p=u.replies)==null?void 0:p.filter(N=>N._id!==d))||[]}}),h(a),T(n)}},ge=e=>{h(e),r&&k&&(clearTimeout(G.current),l.sendTypingIndicator(r._id,!0),G.current=setTimeout(()=>{l.sendTypingIndicator(r._id,!1)},2e3))},M=(e,a)=>{re(n=>({...n,[e]:a,page:1}))},q=e=>{switch(e==null?void 0:e.toLowerCase()){case"open":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800";case"in-progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800";case"resolved":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800";case"closed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400 border-gray-200 dark:border-gray-800"}},ue=e=>{switch(e){case"open":return"ph:circle";case"in-progress":return"ph:clock";case"resolved":return"ph:check-circle";case"closed":return"ph:x-circle";default:return"ph:circle"}},L=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return ie?t("div",{className:"flex justify-center items-center h-64",children:t(se,{})}):s("div",{className:"space-y-6",children:[s("div",{className:"flex justify-between items-center",children:[s("div",{children:[s("div",{className:"flex items-center space-x-3",children:[t("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Support Tickets"}),s("div",{className:"flex items-center space-x-2",children:[t("div",{className:`w-2 h-2 rounded-full ${k?"bg-green-500":"bg-red-500"}`}),t("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:k?"Connected":"Disconnected"})]})]}),t("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage customer support tickets"})]}),s(j,{onClick:()=>W("/dashboard"),className:"btn btn-outline",children:[t(o,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Dashboard"]})]}),A&&s("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t(w,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[s("div",{children:[t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tickets"}),t("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.overview.total})]}),t(o,{icon:"ph:ticket",className:"text-2xl text-blue-500"})]})}),t(w,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[s("div",{children:[t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Open"}),t("p",{className:"text-2xl font-bold text-green-600",children:A.overview.open})]}),t(o,{icon:"ph:circle",className:"text-2xl text-green-500"})]})}),t(w,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[s("div",{children:[t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"}),t("p",{className:"text-2xl font-bold text-yellow-600",children:A.overview.inProgress})]}),t(o,{icon:"ph:clock",className:"text-2xl text-yellow-500"})]})}),t(w,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[s("div",{children:[t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"}),t("p",{className:"text-2xl font-bold text-blue-600",children:A.overview.resolved})]}),t(o,{icon:"ph:check-circle",className:"text-2xl text-blue-500"})]})})]}),s("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"lg:col-span-1",children:s(w,{title:"All Tickets",className:"h-full",children:[s("div",{className:"space-y-3 mb-4",children:[s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),s("select",{value:f.status,onChange:e=>M("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white text-sm",children:[t("option",{value:"",children:"All Status"}),t("option",{value:"open",children:"Open"}),t("option",{value:"in-progress",children:"In Progress"}),t("option",{value:"resolved",children:"Resolved"}),t("option",{value:"closed",children:"Closed"})]})]}),s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),s("select",{value:f.category,onChange:e=>M("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white text-sm",children:[t("option",{value:"",children:"All Categories"}),t("option",{value:"technical",children:"Technical"}),t("option",{value:"billing",children:"Billing"}),t("option",{value:"general",children:"General"}),t("option",{value:"complaint",children:"Complaint"})]})]})]}),t("div",{className:"space-y-2 max-h-[calc(100vh-400px)] overflow-y-auto",children:V.map(e=>{var d;const a=U.has(e._id),n=(r==null?void 0:r._id)===e._id;return s("div",{onClick:()=>me(e),className:`p-3 rounded-lg cursor-pointer transition-colors relative ${n?"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800":"hover:bg-gray-50 dark:hover:bg-gray-800 border border-transparent"} ${a&&!n?"bg-green-50 dark:bg-green-900/10":""}`,children:[a&&t("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("div",{className:"flex items-start space-x-3",children:s("div",{className:"flex-1 min-w-0",children:[s("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center space-x-2",children:[t("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:((d=e.user)==null?void 0:d.name)||"Unknown User"}),a&&t("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:"New"})]}),t("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${q(e.status)}`,children:e.status})]}),t("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.subject}),s("div",{className:"flex items-center justify-between mt-2",children:[t("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:L(e.createdAt)}),t("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.category})]})]})})]},e._id)})}),y&&y.pages>1&&s("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",((y.current||y.currentPage||f.page)-1)*f.limit+1," to"," ",Math.min((y.current||y.currentPage||f.page)*f.limit,y.total)," of"," ",y.total," tickets"]}),s("div",{className:"flex items-center space-x-2",children:[s(j,{onClick:()=>M("page",f.page-1),disabled:f.page===1,className:"btn btn-sm btn-outline",children:[t(o,{icon:"ph:arrow-left",className:"mr-1"}),"Previous"]}),s("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",y.current||y.currentPage||f.page," of ",y.pages]}),s(j,{onClick:()=>M("page",f.page+1),disabled:f.page>=y.pages,className:"btn btn-sm btn-outline",children:["Next",t(o,{icon:"ph:arrow-right",className:"ml-1"})]})]})]})]})}),t("div",{className:"lg:col-span-2",children:ne?t(w,{className:"h-full flex items-center justify-center",children:s("div",{className:"text-center",children:[t(se,{}),t("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading ticket details..."})]})}):r&&i?s(w,{className:"h-full flex flex-col",children:[s("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t("div",{className:"flex items-center space-x-3",children:s("div",{children:[t("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((Y=i.user)==null?void 0:Y.name)||"Unknown User"}),t("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(Z=i.user)==null?void 0:Z.email})]})}),t("div",{className:"flex items-center space-x-2",children:s("span",{className:`px-3 py-1 text-xs font-medium rounded-full border flex items-center space-x-1 ${q(i.status)}`,children:[t(o,{icon:ue(i.status)}),t("span",{children:i.status})]})})]}),s("div",{className:"flex-1 p-4 space-y-4",children:[s("div",{children:[t("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Subject"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.subject})]}),s("div",{children:[t("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.description})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{children:[t("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Category"}),t(O,{color:"info",size:"sm",children:i.category})]}),s("div",{children:[t("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Created"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L(i.createdAt)})]})]}),i.adminNote&&s("div",{children:[t("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Admin Note"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:i.adminNote})]}),s("div",{children:[s("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[t(o,{icon:"ph:chat-circle-text",className:"mr-2"}),"Conversation",i.replies&&i.replies.length>0&&s("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:[i.replies.length," ",i.replies.length===1?"reply":"replies"]})]}),s("div",{className:"space-y-3 max-h-96 overflow-y-auto p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s("div",{className:"flex space-x-3 justify-start",children:[t("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:t(o,{icon:"ph:user",className:"text-gray-600 dark:text-gray-300"})}),t("div",{className:"flex-1 max-w-[75%]",children:s("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3 shadow-sm",children:[s("div",{className:"flex items-center justify-between mb-2",children:[t("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:((K=i.user)==null?void 0:K.name)||"Customer"}),t("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:L(i.createdAt)})]}),t("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:i.description})]})})]}),i.replies&&i.replies.length>0?i.replies.map((e,a)=>{var p,N,X,ee,te;const n=((p=i.user)==null?void 0:p._id)||i.user,d=((N=e.repliedBy)==null?void 0:N._id)||e.repliedBy,c=(n==null?void 0:n.toString())!==(d==null?void 0:d.toString()),g=e.isInternal,u=(X=e._id)==null?void 0:X.startsWith("temp_");return s("div",{className:`flex space-x-3 ${c?"justify-end":"justify-start"} ${g?"opacity-75":""} ${u?"opacity-70":""}`,children:[!c&&t("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:t(o,{icon:"ph:user",className:"text-gray-600 dark:text-gray-300"})}),t("div",{className:"flex-1 max-w-[75%]",children:s("div",{className:`rounded-lg p-3 shadow-sm ${g?"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800":c?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[s("div",{className:`flex items-center justify-between mb-2 ${c?"text-white":""}`,children:[s("div",{className:"flex items-center space-x-2",children:[t("span",{className:`text-xs font-semibold ${c?"text-white":"text-gray-900 dark:text-white"}`,children:c?((ee=e.repliedBy)==null?void 0:ee.name)||"Admin":((te=i.user)==null?void 0:te.name)||"Customer"}),g&&s(O,{color:"warning",size:"sm",children:[t(o,{icon:"ph:lock",className:"mr-1"}),"Internal"]}),c&&!g&&t(O,{color:"info",size:"sm",className:"bg-white/20 text-white",children:"Admin"}),u&&t("span",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"Sending..."})]}),t("span",{className:`text-xs ${c?"text-white/80":"text-gray-500 dark:text-gray-400"}`,children:L(e.timestamp)})]}),t("p",{className:`text-sm ${c?"text-white":"text-gray-700 dark:text-gray-300"}`,children:e.message})]})}),c&&t("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:t(o,{icon:"ph:user-circle",className:"text-white"})})]},e._id||a)}):s("div",{className:"text-center py-6",children:[t(o,{icon:"ph:chat-circle-dots",className:"text-4xl text-gray-400 mx-auto mb-2"}),t("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No replies yet. Be the first to respond!"})]}),t("div",{ref:C})]})]})]}),s("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-4",children:[s("div",{className:"space-y-2",children:[t("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block",children:"Update Status:"}),s("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[s(j,{onClick:()=>H(i._id,"in-progress"),className:"btn btn-sm btn-warning",disabled:i.status==="in-progress"||D,isLoading:D,children:[t(o,{icon:"ph:clock",className:"mr-1"}),"In Progress"]}),s(j,{onClick:()=>H(i._id,"resolved"),className:"btn btn-sm btn-info",disabled:i.status==="resolved"||D,isLoading:D,children:[t(o,{icon:"ph:check-circle",className:"mr-1"}),"Resolve"]})]})]}),s("form",{onSubmit:he,className:"space-y-3",children:[s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add Reply"}),t("textarea",{value:x,onChange:e=>ge(e.target.value),placeholder:k?"Type your reply here...":"Connecting...",rows:3,disabled:!k,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"})]}),s("div",{className:"flex items-center justify-between",children:[s("label",{className:"flex items-center space-x-2",children:[t("input",{type:"checkbox",checked:S,onChange:e=>T(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Internal Note (not visible to user)"})]}),s(j,{type:"submit",disabled:!x.trim()||F||!k,className:"btn btn-primary",isLoading:F,children:[t(o,{icon:k?"ph:paper-plane-tilt":"ph:wifi-slash",className:"mr-2"}),F?"Sending...":k?"Send Reply":"Connecting..."]})]})]})]})]}):V.length===0?t(w,{className:"h-full flex items-center justify-center",children:s("div",{className:"text-center",children:[t(o,{icon:"ph:ticket",className:"text-6xl text-gray-400 mb-4"}),t("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No tickets found"}),t("p",{className:"text-gray-500 dark:text-gray-400",children:"No support tickets match your current filters"})]})}):t(w,{className:"h-full flex items-center justify-center",children:s("div",{className:"text-center",children:[t(o,{icon:"ph:ticket",className:"text-6xl text-gray-400 mb-4"}),t("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Select a ticket to view details"}),t("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose a ticket from the list to view and manage it"})]})})})]})]})};export{Ae as default};
