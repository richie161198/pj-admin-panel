import{b as B,u as q,r as f,a4 as O,a5 as R,a6 as K,a7 as _,j as e,L as C,c as r,B as n,I as t,C as o,F as w,Q as c}from"./index.a3fd4963.js";import{a as H}from"./imageApi.c1c7af18.js";const W=()=>{var v;const A=B(),[I,S]=q(),[u,T]=f.exports.useState("profile"),[x,y]=f.exports.useState(!1),[j,N]=f.exports.useState(!1),{data:h,isLoading:E,refetch:D}=O(),[M,{isLoading:k}]=R(),[U,{isLoading:P}]=K(),[$]=H();_();const l=((v=h==null?void 0:h.data)==null?void 0:v.admin)||(h==null?void 0:h.admin)||h,[a,p]=f.exports.useState({name:"",email:"",phone:"",profilePhoto:"",currentPassword:"",newPassword:"",confirmPassword:"",transactionPin:"",newTransactionPin:"",confirmTransactionPin:""});f.exports.useEffect(()=>{l&&p({name:l.name||"",email:l.email||"",phone:l.phone||"",profilePhoto:l.profilePhoto||"",currentPassword:"",newPassword:"",confirmPassword:"",transactionPin:"",newTransactionPin:"",confirmTransactionPin:""})},[l]);const g=d=>{const{name:m,value:s}=d.target;p(i=>({...i,[m]:s}))},z=async d=>{const m=d.target.files[0];if(!!m){N(!0);try{const s=new FormData;s.append("image",m);const i=await $(s).unwrap();p(b=>({...b,profilePhoto:i.url})),c.success("Profile photo updated successfully")}catch{c.error("Failed to upload image")}finally{N(!1)}}},L=async d=>{var m;d.preventDefault();try{(await M({name:a.name,email:a.email,phone:a.phone,avatar:a.profilePhoto}).unwrap()).status&&(c.success("Profile updated successfully"),y(!1),D())}catch(s){console.error("Profile update error:",s);const i=((m=s==null?void 0:s.data)==null?void 0:m.message)||(s==null?void 0:s.message)||"Failed to update profile";c.error(i)}},F=async d=>{var s;if(d.preventDefault(),!a.currentPassword){c.error("Please enter your current password");return}if(!a.newPassword){c.error("Please enter a new password");return}if(a.newPassword.length<8){c.error("New password must be at least 8 characters long");return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(a.newPassword)){c.error("Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character (@$!%*?&)");return}if(a.newPassword!==a.confirmPassword){c.error("New passwords do not match");return}if(a.currentPassword===a.newPassword){c.error("New password must be different from current password");return}try{(await U({currentPassword:a.currentPassword,newPassword:a.newPassword}).unwrap()).status&&(c.success("Password changed successfully"),p(b=>({...b,currentPassword:"",newPassword:"",confirmPassword:""})))}catch(i){console.error("Password change error:",i);const b=((s=i==null?void 0:i.data)==null?void 0:s.message)||(i==null?void 0:i.message)||"Failed to change password";c.error(b)}},Z=[{id:"profile",label:"Profile",icon:"ph:user"},{id:"security",label:"Security",icon:"ph:shield-check"},{id:"notifications",label:"Notifications",icon:"ph:bell"},{id:"preferences",label:"Preferences",icon:"ph:gear"}];return E?e("div",{className:"flex justify-center items-center h-64",children:e(C,{})}):r("div",{className:"space-y-6",children:[r("div",{className:"flex justify-between items-center",children:[r("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Settings"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account settings and preferences"})]}),r(n,{onClick:()=>A("/dashboard"),className:"btn btn-outline",children:[e(t,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Dashboard"]})]}),r("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{className:"lg:col-span-1",children:e(o,{className:"p-0",children:e("nav",{className:"space-y-1",children:Z.map(d=>r("button",{onClick:()=>T(d.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${u===d.id?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"}`,children:[e(t,{icon:d.icon,className:"mr-3 text-lg"}),d.label]},d.id))})})}),r("div",{className:"lg:col-span-3",children:[u==="profile"&&e(o,{title:"Profile Information",children:r("form",{onSubmit:L,className:"space-y-6",children:[r("div",{className:"flex items-center space-x-6",children:[r("div",{className:"relative",children:[a.profilePhoto?e("img",{src:a.profilePhoto,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):e("div",{className:"w-20 h-20 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e(t,{icon:"ph:user",className:"text-2xl text-gray-400"})}),r("label",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full p-2 cursor-pointer hover:bg-blue-600 transition-colors",children:[e(t,{icon:"ph:camera",className:"text-sm"}),e("input",{type:"file",accept:"image/*",onChange:z,className:"hidden",disabled:j})]})]}),r("div",{children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:(l==null?void 0:l.name)||"Admin User"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(l==null?void 0:l.email)||"admin@example.com"}),e("p",{className:"text-xs text-gray-400",children:"Click the camera icon to change photo"})]})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),e("input",{type:"text",name:"name",value:a.name,onChange:g,disabled:!x,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-800"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e("input",{type:"email",name:"email",value:a.email,onChange:g,disabled:!x,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-800"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),e("input",{type:"tel",name:"phone",value:a.phone,onChange:g,disabled:!x,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-800"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e("input",{type:"text",value:(l==null?void 0:l.role)||"Admin",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"})]})]}),e("div",{className:"flex justify-end space-x-3",children:x?r(w,{children:[e(n,{type:"button",onClick:()=>y(!1),className:"btn btn-outline",children:"Cancel"}),e(n,{type:"submit",disabled:k,className:"btn btn-primary",children:k?"Saving...":"Save Changes"})]}):r(n,{type:"button",onClick:()=>y(!0),className:"btn btn-primary",children:[e(t,{icon:"ph:pencil",className:"mr-2"}),"Edit Profile"]})})]})}),u==="security"&&e("div",{className:"space-y-6",children:e(o,{title:"Change Password",children:r("form",{onSubmit:F,className:"space-y-4",children:[e("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:r("div",{className:"flex items-start",children:[e(t,{icon:"ph:info",className:"text-blue-500 text-xl mr-3 mt-0.5"}),r("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e("p",{className:"font-medium mb-1",children:"Password Requirements:"}),r("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e("li",{children:"At least 8 characters long"}),e("li",{children:"One uppercase letter (A-Z)"}),e("li",{children:"One lowercase letter (a-z)"}),e("li",{children:"One number (0-9)"}),e("li",{children:"One special character (@$!%*?&)"}),e("li",{children:"Must be different from current password"})]})]})]})}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password *"}),e("input",{type:"password",name:"currentPassword",value:a.currentPassword,onChange:g,placeholder:"Enter your current password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0,autoComplete:"current-password"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password *"}),e("input",{type:"password",name:"newPassword",value:a.newPassword,onChange:g,placeholder:"Enter your new password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0,minLength:"8",autoComplete:"new-password"}),a.newPassword&&r("div",{className:"mt-2 space-y-1",children:[a.newPassword.length<8&&e("p",{className:"text-xs text-red-500",children:"Password must be at least 8 characters"}),a.newPassword.length>=8&&!/(?=.*[a-z])/.test(a.newPassword)&&e("p",{className:"text-xs text-red-500",children:"Password must contain at least one lowercase letter"}),a.newPassword.length>=8&&!/(?=.*[A-Z])/.test(a.newPassword)&&e("p",{className:"text-xs text-red-500",children:"Password must contain at least one uppercase letter"}),a.newPassword.length>=8&&!/(?=.*\d)/.test(a.newPassword)&&e("p",{className:"text-xs text-red-500",children:"Password must contain at least one number"}),a.newPassword.length>=8&&!/(?=.*[@$!%*?&])/.test(a.newPassword)&&e("p",{className:"text-xs text-red-500",children:"Password must contain at least one special character (@$!%*?&)"}),a.newPassword.length>=8&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(a.newPassword)&&r("p",{className:"text-xs text-green-500 flex items-center",children:[e(t,{icon:"ph:check-circle",className:"mr-1"}),"Password meets all requirements"]})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password *"}),e("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:g,placeholder:"Confirm your new password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0,autoComplete:"new-password"}),a.confirmPassword&&a.newPassword!==a.confirmPassword&&e("p",{className:"text-xs text-red-500 mt-1",children:"Passwords do not match"}),a.confirmPassword&&a.newPassword===a.confirmPassword&&r("p",{className:"text-xs text-green-500 mt-1 flex items-center",children:[e(t,{icon:"ph:check-circle",className:"mr-1"}),"Passwords match"]})]}),r("div",{className:"flex space-x-3 pt-2",children:[e(n,{type:"button",onClick:()=>{p(d=>({...d,currentPassword:"",newPassword:"",confirmPassword:""}))},className:"btn btn-outline",children:"Clear"}),e(n,{type:"submit",disabled:P||a.newPassword!==a.confirmPassword||a.newPassword.length<8||!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(a.newPassword),className:"btn btn-primary flex-1",children:P?r(w,{children:[e(C,{}),e("span",{className:"ml-2",children:"Changing Password..."})]}):r(w,{children:[e(t,{icon:"ph:lock-key",className:"mr-2"}),"Change Password"]})})]})]})})}),u==="notifications"&&e(o,{title:"Notification Preferences",children:r("div",{className:"space-y-6",children:[r("div",{className:"flex items-center justify-between",children:[r("div",{children:[e("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Email Notifications"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive notifications via email"})]}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),r("div",{className:"flex items-center justify-between",children:[r("div",{children:[e("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"SMS Notifications"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive notifications via SMS"})]}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),r("div",{className:"flex items-center justify-between",children:[r("div",{children:[e("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Push Notifications"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive push notifications"})]}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})}),u==="preferences"&&e("div",{className:"space-y-6",children:e(o,{title:"Theme Preferences",children:r("div",{className:"space-y-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color Theme"}),r("select",{onChange:()=>S(!I),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"light",children:"Light"}),e("option",{value:"dark",children:"Dark"})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),r("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"en",children:"English"}),e("option",{value:"hi",children:"Hindi"}),e("option",{value:"es",children:"Spanish"})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),r("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"UTC",children:"UTC"}),e("option",{value:"IST",children:"India Standard Time"}),e("option",{value:"EST",children:"Eastern Time"})]})]})]})})}),u==="billing"&&r("div",{className:"space-y-6",children:[e(o,{title:"Billing Information",children:r("div",{className:"space-y-4",children:[r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Billing Address"}),e("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Enter billing address"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tax ID"}),e("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Enter tax ID"})]})]}),e("div",{className:"flex justify-end",children:e(n,{className:"btn btn-primary",children:"Update Billing Info"})})]})}),e(o,{title:"Payment Methods",children:r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r("div",{className:"flex items-center space-x-3",children:[e(t,{icon:"ph:credit-card",className:"text-2xl text-blue-500"}),r("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:"**** **** **** 4242"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Expires 12/25"})]})]}),e(n,{className:"btn btn-sm btn-outline-danger",children:"Remove"})]}),r(n,{className:"btn btn-outline-primary w-full",children:[e(t,{icon:"ph:plus",className:"mr-2"}),"Add Payment Method"]})]})})]}),u==="api"&&r("div",{className:"space-y-6",children:[e(o,{title:"API Keys",children:r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:"Production API Key"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"pk_live_51H...xyz"})]}),r("div",{className:"flex space-x-2",children:[e(n,{className:"btn btn-sm btn-outline",children:e(t,{icon:"ph:copy"})}),e(n,{className:"btn btn-sm btn-outline-danger",children:e(t,{icon:"ph:trash"})})]})]}),r("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:"Test API Key"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"pk_test_51H...abc"})]}),r("div",{className:"flex space-x-2",children:[e(n,{className:"btn btn-sm btn-outline",children:e(t,{icon:"ph:copy"})}),e(n,{className:"btn btn-sm btn-outline-danger",children:e(t,{icon:"ph:trash"})})]})]}),r(n,{className:"btn btn-primary",children:[e(t,{icon:"ph:plus",className:"mr-2"}),"Generate New API Key"]})]})}),e(o,{title:"Webhooks",children:r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:"Order Created"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"https://api.example.com/webhooks/orders"})]}),r("div",{className:"flex space-x-2",children:[e("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Active"}),e(n,{className:"btn btn-sm btn-outline-danger",children:e(t,{icon:"ph:trash"})})]})]}),r(n,{className:"btn btn-outline-primary w-full",children:[e(t,{icon:"ph:plus",className:"mr-2"}),"Add Webhook"]})]})})]})]})]})]})};export{W as default};
