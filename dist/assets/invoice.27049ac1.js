import{a4 as S,b as B,r as b,j as e,L,c as t,I as h,B as p,F as M}from"./index.93603967.js";import{g as _,a as F}from"./orderApi.c470ea6a.js";const i=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(c),G=()=>{var f,k,w,v;const{id:c,type:g}=S(),N=B(),[r,u]=b.exports.useState(null),[I,D]=b.exports.useState(!0),{data:o}=_({page:1,limit:1e3}),{data:m}=F({page:1,limit:1e3});b.exports.useEffect(()=>{(g==="product"&&m||g==="investment"&&o)&&(()=>{var d,x;if(g==="product"){const s=(((d=m==null?void 0:m.data)==null?void 0:d.orders)||[]).find(l=>l._id===c);s&&u({...s,orderType:"product"})}else{const s=(((x=o==null?void 0:o.data)==null?void 0:x.orders)||[]).find(l=>l._id===c);s&&u({...s,orderType:"investment"})}D(!1)})()},[c,g,m,o]);const j=()=>{window.print()},T=()=>{const a=document.getElementById("invoice-content"),d=window.open("","_blank");d.document.write(`
      <html>
        <head>
          <title>Invoice - ${(r==null?void 0:r.orderId)||(r==null?void 0:r.orderCode)}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
            .invoice-container { max-width: 800px; margin: 0 auto; }
            .header { display: flex; justify-content: space-between; margin-bottom: 30px; }
            .company-info h1 { color: #2563eb; margin: 0; }
            .invoice-info { text-align: right; }
            .invoice-details { margin-bottom: 30px; }
            .billing-section { display: flex; justify-content: space-between; margin-bottom: 30px; }
            .billing-info { flex: 1; margin-right: 20px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }
            .items-table th { background-color: #f8f9fa; }
            .totals { text-align: right; }
            .footer { margin-top: 30px; text-align: center; color: #666; }
          </style>
        </head>
        <body>
          ${a.innerHTML}
        </body>
      </html>
    `),d.document.close(),d.print()};if(I)return e("div",{className:"flex justify-center items-center h-64",children:e(L,{})});if(!r)return t("div",{className:"text-center py-12",children:[e(h,{icon:"ph:file-text",className:"text-6xl text-gray-400 mx-auto mb-4"}),e("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Invoice Not Found"}),e("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The invoice you're looking for doesn't exist."}),t(p,{onClick:()=>N(-1),className:"btn btn-primary",children:[e(h,{icon:"ph:arrow-left",className:"mr-2"}),"Go Back"]})]});const n=r.orderType==="product",P=n?r.orderCode:r.orderId,C=r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A",O=r.updatedAt?new Date(r.updatedAt).toLocaleDateString():"N/A";return e("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 py-8",children:t("div",{className:"max-w-4xl mx-auto px-4",children:[t("div",{className:"mb-6 flex justify-between items-center",children:[t(p,{onClick:()=>N(-1),className:"btn btn-outline",children:[e(h,{icon:"ph:arrow-left",className:"mr-2"}),"Back"]}),t("div",{className:"flex space-x-3",children:[t(p,{onClick:T,className:"btn btn-outline",children:[e(h,{icon:"ph:download",className:"mr-2"}),"Download"]}),t(p,{onClick:j,className:"btn btn-primary",children:[e(h,{icon:"ph:printer",className:"mr-2"}),"Print"]})]})]}),t("div",{id:"invoice-content",className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-8",children:[t("div",{className:"flex justify-between items-start mb-8",children:[t("div",{children:[e("h1",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"Precious Jewels"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Investment & Jewelry Platform"}),t("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[e("p",{children:"123 Business Street"}),e("p",{children:"Mumbai, Maharashtra 400001"}),e("p",{children:"India"}),e("p",{children:"Phone: +91 98765 43210"}),e("p",{children:"Email: info@preciousjewels.com"})]})]}),t("div",{className:"text-right",children:[e("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"INVOICE"}),t("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Invoice #"}),e("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:P}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Date: ",C]}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Due: ",O]})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Bill To:"}),t("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[e("p",{className:"font-semibold text-gray-900 dark:text-white",children:((f=r.user)==null?void 0:f.name)||"N/A"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:((k=r.user)==null?void 0:k.email)||"N/A"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:((w=r.user)==null?void 0:w.phone)||"N/A"}),r.shippingAddress&&t("div",{className:"mt-2",children:[e("p",{className:"text-gray-600 dark:text-gray-400",children:r.shippingAddress.street}),t("p",{className:"text-gray-600 dark:text-gray-400",children:[r.shippingAddress.city,", ",r.shippingAddress.state]}),t("p",{className:"text-gray-600 dark:text-gray-400",children:[r.shippingAddress.zipCode,", ",r.shippingAddress.country]})]})]})]}),t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Order Details:"}),t("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[t("div",{className:"flex justify-between mb-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Order Type:"}),e("span",{className:"font-semibold text-gray-900 dark:text-white",children:n?"Product Order":"Investment Order"})]}),t("div",{className:"flex justify-between mb-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.status})]}),t("div",{className:"flex justify-between mb-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Payment Method:"}),e("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.paymentMethod||"N/A"})]}),!n&&t("div",{className:"flex justify-between mb-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Transaction Type:"}),e("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.type})]})]})]})]}),t("div",{className:"mb-8",children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Items"}),e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full border-collapse",children:[e("thead",{children:t("tr",{className:"bg-gray-50 dark:bg-slate-700",children:[e("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:n?"Product":"Description"}),n&&e("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Brand"}),e("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-center text-sm font-semibold text-gray-900 dark:text-white",children:"Qty"}),e("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right text-sm font-semibold text-gray-900 dark:text-white",children:"Price"}),e("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right text-sm font-semibold text-gray-900 dark:text-white",children:"Total"})]})}),e("tbody",{children:n?(v=r.items)==null?void 0:v.map((a,d)=>{var x,y,s,l,A;return t("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3",children:t("div",{className:"flex items-center",children:[((y=(x=a.productDataid)==null?void 0:x.images)==null?void 0:y[0])&&e("img",{src:a.productDataid.images[0],alt:a.productDataid.name,className:"w-12 h-12 object-cover rounded mr-3"}),t("div",{children:[e("p",{className:"font-semibold text-gray-900 dark:text-white",children:((s=a.productDataid)==null?void 0:s.name)||"Product"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["SKU: ",((l=a.productDataid)==null?void 0:l.skuId)||"N/A"]})]})]})}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-gray-900 dark:text-white",children:((A=a.productDataid)==null?void 0:A.brand)||"N/A"}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-center text-gray-900 dark:text-white",children:a.quantity||1}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right text-gray-900 dark:text-white",children:i(a.price||0)}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right font-semibold text-gray-900 dark:text-white",children:i((a.price||0)*(a.quantity||1))})]},d)}):t("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3",children:t("div",{children:[e("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.type==="gold_purchase"||r.type==="gold_sale"?"Gold Investment":r.type==="silver_purchase"||r.type==="silver_sale"?"Silver Investment":r.type==="deposit"?"Account Deposit":"Account Withdrawal"}),e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.description||`${r.type} transaction`})]})}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-center text-gray-900 dark:text-white",children:"1"}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right text-gray-900 dark:text-white",children:i(r.amount||0)}),e("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-3 text-right font-semibold text-gray-900 dark:text-white",children:i(r.amount||0)})]})})]})})]}),e("div",{className:"flex justify-end",children:e("div",{className:"w-80",children:t("div",{className:"space-y-2",children:[n&&t(M,{children:[t("div",{className:"flex justify-between py-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),e("span",{className:"text-gray-900 dark:text-white",children:i(r.totalAmount||0)})]}),r.shippingCost>0&&t("div",{className:"flex justify-between py-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Shipping:"}),e("span",{className:"text-gray-900 dark:text-white",children:i(r.shippingCost||0)})]}),r.tax>0&&t("div",{className:"flex justify-between py-2",children:[e("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax:"}),e("span",{className:"text-gray-900 dark:text-white",children:i(r.tax||0)})]})]}),e("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-2",children:t("div",{className:"flex justify-between py-2",children:[e("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),e("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i(r.totalAmount||r.amount||0)})]})})]})})}),t("div",{className:"mt-12 pt-8 border-t border-gray-300 dark:border-gray-600",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t("div",{children:[e("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Payment Information"}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Payment Method: ",r.paymentMethod||"N/A"]}),t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Status: ",r.status]}),r.transactionId&&t("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Transaction ID: ",r.transactionId]})]}),t("div",{children:[e("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Thank You!"}),e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Thank you for your business. For any questions regarding this invoice, please contact us."})]})]}),e("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400",children:e("p",{children:"This is a computer-generated invoice and does not require a signature."})})]})]})]})})};export{G as default};
