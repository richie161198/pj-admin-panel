import{a1 as L,b as B,r as T,j as a,L as O,c as e,B as c,I as n,Q as g}from"./index.db93dc89.js";import{d as E,e as F,f as U}from"./authApiSlice.bba4fb0b.js";const Q=()=>{var N,b,f,k,w,v,P;const{id:d}=L(),m=B(),[x,j]=T.exports.useState(0),{data:r,isLoading:u,error:o,refetch:h}=E(d),[p,{isLoading:y}]=F(),[D,{isLoading:A}]=U();console.log("API Call Debug:",{id:d,isLoading:u,error:o,productResponse:r,url:`/commerce/singleProduct/${d}`});let t=null;(r==null?void 0:r.products)&&Array.isArray(r.products)?t=r.products[0]:r!=null&&r.product?t=r.product:r&&!r.products&&(t=r),console.log("Product Details:",t),console.log("Product Response:",r);const C=async()=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await D(d).unwrap(),g.success("Product deleted successfully"),m("/products")}catch{g.error("Failed to delete product")}},I=async()=>{try{await p({id:d,trending:!t.trending}).unwrap(),g.success(`Product ${t.trending?"removed from":"added to"} trending`),h()}catch{g.error("Failed to update trending status")}},S=async()=>{try{await p({id:d,popular:!t.popular}).unwrap(),g.success(`Product ${t.popular?"removed from":"added to"} popular`),h()}catch{g.error("Failed to update popular status")}};return u?a("div",{className:"flex justify-center items-center h-64",children:a(O,{})}):o?(console.error("Product Details Error:",o),e("div",{className:"text-center py-8",children:[e("p",{className:"text-red-500",children:["Error loading product: ",o.message]}),e("p",{className:"text-sm text-gray-500 mt-2",children:["Product ID: ",d]}),e("p",{className:"text-sm text-gray-500",children:["Status: ",o.status]}),e("p",{className:"text-sm text-gray-500",children:["Data: ",JSON.stringify(o.data)]}),e("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-left",children:[a("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full Error:"}),a("pre",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 overflow-auto",children:JSON.stringify(o,null,2)})]}),e("div",{className:"flex space-x-2 mt-4",children:[a(c,{onClick:()=>h(),className:"btn btn-primary",children:"Retry"}),a(c,{onClick:()=>m("/products"),className:"btn btn-outline",children:"Back to Products"})]})]})):t?(console.log("Final Product Check:",{product:t,hasProduct:!!t,productKeys:t?Object.keys(t):[],productId:t==null?void 0:t._id,productName:t==null?void 0:t.name}),e("div",{className:"space-y-6",children:[e("div",{className:"flex justify-between items-center",children:[e("div",{className:"flex items-center space-x-4",children:[e(c,{onClick:()=>m("/products"),className:"btn btn-outline",children:[a(n,{icon:"ph:arrow-left",className:"mr-2"}),"Back"]}),e("div",{children:[a("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Product Details"}),a("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage product information"})]})]}),e("div",{className:"flex space-x-3",children:[e(c,{onClick:()=>m(`/products/${d}/edit`),className:"btn btn-outline-secondary",children:[a(n,{icon:"ph:pencil",className:"mr-2"}),"Edit"]}),e(c,{onClick:C,disabled:A,className:"btn btn-outline-danger",children:[a(n,{icon:"ph:trash",className:"mr-2"}),"Delete"]})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e("div",{className:"lg:col-span-2 space-y-6",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Images"}),t.images&&t.images.length>0?e("div",{className:"space-y-4",children:[a("div",{className:"aspect-square bg-gray-100 dark:bg-slate-700 rounded-lg overflow-hidden",children:a("img",{src:t.images[x],alt:t.name,className:"w-full h-full object-cover"})}),t.images.length>1&&a("div",{className:"flex space-x-2 overflow-x-auto",children:t.images.map((s,l)=>a("button",{onClick:()=>j(l),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 ${x===l?"border-blue-500":"border-gray-200 dark:border-gray-600"}`,children:a("img",{src:s,alt:`${t.name} ${l+1}`,className:"w-full h-full object-cover"})},l))})]}):a("div",{className:"aspect-square bg-gray-100 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:a(n,{icon:"ph:image",className:"text-6xl text-gray-400"})})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e("div",{className:"flex justify-between items-start mb-4",children:[e("div",{children:[a("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.name}),a("p",{className:"text-gray-600 dark:text-gray-400",children:t.brand}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["SKU: ",t.skuId]})]}),e("div",{className:"flex flex-wrap gap-2",children:[a("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${t.active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.active?"Active":"Inactive"}),t.trending&&a("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Trending"}),t.popular&&a("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Popular"})]})]}),e("div",{className:"flex items-center mb-4",children:[a("div",{className:"flex items-center",children:[...Array(5)].map((s,l)=>{var i;return a(n,{icon:"ph:star-fill",className:`w-5 h-5 ${l<Math.floor(((i=t.rating)==null?void 0:i.value)||0)?"text-yellow-400":"text-gray-300"}`},l)})}),e("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:[((N=t.rating)==null?void 0:N.value)||0," (",((b=t.rating)==null?void 0:b.count)||0," reviews)"]})]}),e("div",{className:"mb-6",children:[a("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),a("p",{className:"text-gray-600 dark:text-gray-400",children:t.description||"No description available"})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Category"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:t.categories||"N/A"})]}),e("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Stock"}),e("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[t.stock||0," units"]})]}),e("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Selected Carat"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:t.selectedCaret||"N/A"})]}),e("div",{children:[a("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Carat Options"}),a("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:((f=t.caretOptions)==null?void 0:f.join(", "))||"N/A"})]})]}),t.productDetails&&t.productDetails.length>0&&e("div",{className:"mb-6",children:[a("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Specifications"}),a("div",{className:"space-y-3",children:t.productDetails.map((s,l)=>e("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e("h5",{className:"font-medium text-gray-900 dark:text-white",children:[s.type,": ",s.name]}),s.attributes&&a("div",{className:"mt-2 grid grid-cols-2 gap-2",children:Object.entries(s.attributes).map(([i,$])=>e("div",{children:[e("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:[i.replace(/([A-Z])/g," $1").trim(),":"]}),a("span",{className:"text-sm text-gray-900 dark:text-white ml-1",children:$})]},i))})]},l))})]})]})]}),e("div",{className:"space-y-6",children:[e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Pricing Information"}),e("div",{className:"space-y-4",children:[e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Selling Price"}),e("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["\u20B9",((k=t.sellingprice)==null?void 0:k.toLocaleString())||0]})]}),t.total&&t.total!==t.sellingprice&&e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Price"}),e("span",{className:"text-sm text-gray-900 dark:text-white line-through",children:["\u20B9 ",t.total.toLocaleString()]})]}),e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"GST"}),e("span",{className:"text-sm text-gray-900 dark:text-white",children:[t.gst||0," %"]})]}),e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Weight"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:((w=t.subtotal)==null?void 0:w.weight)||"N/A"})]})]}),t.priceDetails&&t.priceDetails.length>0&&e("div",{className:"mt-6",children:[a("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Price Breakdown"}),a("div",{className:"space-y-2",children:t.priceDetails.map((s,l)=>{var i;return e("div",{className:"flex justify-between text-sm",children:[e("span",{className:"text-gray-500 dark:text-gray-400",children:[s.name," ",s.weight&&`(${s.weight})`]}),e("span",{className:"text-gray-900 dark:text-white",children:["\u20B9 ",((i=s.value)==null?void 0:i.toLocaleString())||0]})]},l)})})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e("div",{className:"space-y-3",children:[e(c,{onClick:I,disabled:y,className:`btn w-full justify-start ${t.trending?"btn-outline-warning":"btn-outline"}`,children:[a(n,{icon:t.trending?"ph:fire":"ph:fire-simple",className:"mr-2"}),t.trending?"Remove from Trending":"Add to Trending"]}),e(c,{onClick:S,disabled:y,className:`btn w-full justify-start ${t.popular?"btn-outline-success":"btn-outline"}`,children:[a(n,{icon:t.popular?"ph:heart-fill":"ph:heart",className:"mr-2"}),t.popular?"Remove from Popular":"Add to Popular"]}),e(c,{onClick:()=>m(`/products/${d}/edit`),className:"btn btn-outline w-full justify-start",children:[a(n,{icon:"ph:pencil",className:"mr-2"}),"Edit Product"]})]})]}),e("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[a("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Product Statistics"}),e("div",{className:"space-y-4",children:[e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A"})]}),e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Updated"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString():"N/A"})]}),e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rating"}),e("span",{className:"text-sm text-gray-900 dark:text-white",children:[((v=t.rating)==null?void 0:v.value)||0,"/5"]})]}),e("div",{className:"flex justify-between",children:[a("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reviews"}),a("span",{className:"text-sm text-gray-900 dark:text-white",children:((P=t.rating)==null?void 0:P.count)||0})]})]})]})]})]})]})):e("div",{className:"text-center py-8",children:[a("p",{className:"text-gray-500",children:"Product not found"}),e("p",{className:"text-sm text-gray-400 mt-2",children:["Product ID: ",d]}),e("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-left",children:[a("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Debug Info:"}),a("pre",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 overflow-auto",children:JSON.stringify(r,null,2)})]}),e("div",{className:"flex space-x-2 mt-4",children:[a(c,{onClick:()=>m("/products"),className:"btn btn-outline",children:"Back to Products"}),a(c,{onClick:()=>h(),className:"btn btn-primary",children:"Test API Call"})]})]})};export{Q as default};
