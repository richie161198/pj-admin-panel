import{b as J,a7 as K,r as C,aa as V,ab as W,ac as X,ad as Y,j as e,L as Z,c as a,I as i,B as l,C as p,F as P,Q as h}from"./index.cccf3715.js";const ee=()=>{var F,I,j,_;const S=J(),{user:m}=K(),[x,M]=C.exports.useState({page:1,limit:10,search:"",role:"",isActive:""}),[b,y]=C.exports.useState(!1),[t,N]=C.exports.useState({name:"",email:"",password:"",confirmPassword:"",role:"admin",department:"",phone:"",permissions:[]}),{data:u,isLoading:R,error:f,refetch:v}=V(x),{data:w,isLoading:q}=W(),[B,{isLoading:E}]=X(),[T,{isLoading:L}]=Y(),D=((F=u==null?void 0:u.data)==null?void 0:F.admins)||[],n=((I=u==null?void 0:u.data)==null?void 0:I.pagination)||{},k=((j=w==null?void 0:w.data)==null?void 0:j.stats)||{},o=(r,d)=>{M(s=>({...s,[r]:d,page:1}))},$=async(r,d)=>{var s;if(!!window.confirm(`Are you sure you want to delete admin "${d}"? This action cannot be undone.`))try{await B(r).unwrap(),h.success("Admin deleted successfully"),v()}catch(c){console.error("Delete admin error:",c);const A=((s=c==null?void 0:c.data)==null?void 0:s.message)||(c==null?void 0:c.message)||"Failed to delete admin";h.error(A)}},g=r=>{const{name:d,value:s,type:c,checked:A}=r.target;N(H=>({...H,[d]:c==="checkbox"?A:s}))},G=r=>{N(d=>({...d,permissions:d.permissions.includes(r)?d.permissions.filter(s=>s!==r):[...d.permissions,r]}))},Q=async r=>{var d;if(r.preventDefault(),t.password!==t.confirmPassword){h.error("Passwords do not match");return}if(t.password.length<8){h.error("Password must be at least 8 characters long");return}if(t.permissions.length===0){h.error("Please select at least one page access");return}try{await T({name:t.name,email:t.email,password:t.password,role:t.role,department:t.department,phone:t.phone,permissions:t.permissions}).unwrap(),h.success("Admin created successfully"),y(!1),N({name:"",email:"",password:"",confirmPassword:"",role:"admin",department:"",phone:"",permissions:[]}),v()}catch(s){console.error("Create admin error:",s);const c=((d=s==null?void 0:s.data)==null?void 0:d.message)||(s==null?void 0:s.message)||"Failed to create admin";h.error(c)}},O=r=>{switch(r){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"moderator":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"support":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},z=r=>r?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";return R||q?e("div",{className:"flex justify-center items-center h-64",children:e(Z,{})}):f?a("div",{className:"text-center py-8",children:[e(i,{icon:"ph:warning",className:"mx-auto text-red-500 text-4xl mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Error Loading Admins"}),e("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:((_=f==null?void 0:f.data)==null?void 0:_.message)||"Failed to load admin list"}),a(l,{onClick:()=>v(),className:"btn btn-primary",children:[e(i,{icon:"ph:arrow-clockwise",className:"mr-2"}),"Try Again"]})]}):a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-between items-center",children:[a("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Management"}),e("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage admin accounts and permissions"})]}),(m==null?void 0:m.role)==="super_admin"&&a(l,{onClick:()=>y(!0),className:"btn btn-primary",children:[e(i,{icon:"ph:user-plus",className:"mr-2"}),"Create Admin"]})]}),b&&a(p,{title:"Create New Admin",children:[a("div",{className:"flex justify-between items-center mb-4",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Create New Admin"}),e(l,{onClick:()=>y(!1),className:"btn btn-outline btn-sm",children:e(i,{icon:"ph:x"})})]}),a("form",{onSubmit:Q,className:"space-y-6",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),e("input",{type:"text",name:"name",value:t.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter full name"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),e("input",{type:"email",name:"email",value:t.email,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter email address"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),e("input",{type:"password",name:"password",value:t.password,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter password"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password *"}),e("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Confirm password"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role *"}),a("select",{name:"role",value:t.role,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",children:[e("option",{value:"admin",children:"Admin"}),e("option",{value:"moderator",children:"Moderator"}),e("option",{value:"support",children:"Support"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department"}),e("input",{type:"text",name:"department",value:t.department,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter department"})]}),a("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),e("input",{type:"tel",name:"phone",value:t.phone,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter phone number"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Page Access *"}),e("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Select which pages this admin can access"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 border border-gray-300 dark:border-gray-600 rounded-md p-4 bg-gray-50 dark:bg-gray-800",children:[{id:"dashboard",label:"Dashboard",icon:"ph:house"},{id:"customers",label:"Customers",icon:"ph:users"},{id:"products",label:"Products",icon:"ph:package"},{id:"categories",label:"Categories",icon:"ph:folders"},{id:"banners",label:"Banners",icon:"ph:image-square"},{id:"orders",label:"Orders",icon:"ph:shopping-cart"},{id:"invoices",label:"Invoices",icon:"ph:receipt"},{id:"return-refunds",label:"Return & Refunds",icon:"ph:arrow-counter-clockwise"},{id:"investment-orders",label:"Investment Orders",icon:"ph:chart-line-up"},{id:"autopay-subscriptions",label:"Autopay Subscriptions",icon:"ph:repeat"},{id:"investment-invoices",label:"Investment Invoices",icon:"ph:receipt"},{id:"investment-settings",label:"Investment Settings",icon:"ph:gear-six"},{id:"shipment-settings",label:"Shipment Settings",icon:"ph:truck"},{id:"support-tickets",label:"Support Tickets",icon:"ph:ticket"},{id:"notifications",label:"Notifications",icon:"ph:bell"},{id:"referred-users",label:"Referred Users",icon:"ph:users"},{id:"admin-profile",label:"Admin Profile",icon:"ph:user-circle"},{id:"admin-list",label:"Admin List",icon:"ph:users-three"},{id:"maintenance",label:"Maintenance",icon:"ph:gear"},{id:"privacy-policy",label:"Privacy Policy",icon:"ph:lock"},{id:"return-policy",label:"Return Policy",icon:"ph:arrow-counter-clockwise"},{id:"shipping-policy",label:"Shipping Policy",icon:"ph:truck"},{id:"cancellation-policy",label:"Cancellation Policy",icon:"ph:x-circle"},{id:"grievance-policy",label:"Grievance Policy",icon:"ph:warning-circle"},{id:"digigold-redemption-policy",label:"Digital Gold & Redemption Policy",icon:"ph:coins"},{id:"terms-and-conditions",label:"Terms and Conditions",icon:"ph:file-text"}].map(r=>a("label",{className:"flex items-center p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-700 cursor-pointer transition-colors",children:[e("input",{type:"checkbox",checked:t.permissions.includes(r.id),onChange:()=>G(r.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e(i,{icon:r.icon,className:"ml-3 text-lg text-gray-600 dark:text-gray-400"}),e("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:r.label})]},r.id))}),t.permissions.length===0&&e("p",{className:"text-xs text-red-500 dark:text-red-400 mt-2",children:"Please select at least one page access"})]}),a("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a(l,{type:"button",onClick:()=>y(!1),className:"btn btn-outline",children:[e(i,{icon:"ph:x",className:"mr-2"}),"Cancel"]}),e(l,{type:"submit",disabled:L,className:"btn btn-primary",children:L?a(P,{children:[e(i,{icon:"ph:spinner",className:"animate-spin mr-2"}),"Creating Admin..."]}):a(P,{children:[e(i,{icon:"ph:user-plus",className:"mr-2"}),"Submit"]})})]})]})]}),!b&&a("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(p,{children:a("div",{className:"flex items-center",children:[e("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900",children:e(i,{icon:"ph:users",className:"text-blue-600 dark:text-blue-400 text-xl"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Admins"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.totalAdmins||0})]})]})}),e(p,{children:a("div",{className:"flex items-center",children:[e("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900",children:e(i,{icon:"ph:user-check",className:"text-green-600 dark:text-green-400 text-xl"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Admins"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.activeAdmins||0})]})]})}),e(p,{children:a("div",{className:"flex items-center",children:[e("div",{className:"p-3 rounded-full bg-red-100 dark:bg-red-900",children:e(i,{icon:"ph:crown",className:"text-red-600 dark:text-red-400 text-xl"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Super Admins"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.superAdmins||0})]})]})}),e(p,{children:a("div",{className:"flex items-center",children:[e("div",{className:"p-3 rounded-full bg-yellow-100 dark:bg-yellow-900",children:e(i,{icon:"ph:shield-check",className:"text-yellow-600 dark:text-yellow-400 text-xl"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Support Staff"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.supportStaff||0})]})]})})]}),!b&&e(p,{title:"Filters",children:a("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e("input",{type:"text",placeholder:"Search by name or email...",value:x.search,onChange:r=>o("search",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),a("select",{value:x.role,onChange:r=>o("role",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",children:[e("option",{value:"",children:"All Roles"}),e("option",{value:"super_admin",children:"Super Admin"}),e("option",{value:"admin",children:"Admin"}),e("option",{value:"moderator",children:"Moderator"}),e("option",{value:"support",children:"Support"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a("select",{value:x.isActive,onChange:r=>o("isActive",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",children:[e("option",{value:"",children:"All Status"}),e("option",{value:"true",children:"Active"}),e("option",{value:"false",children:"Inactive"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Per Page"}),a("select",{value:x.limit,onChange:r=>o("limit",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",children:[e("option",{value:10,children:"10 per page"}),e("option",{value:25,children:"25 per page"}),e("option",{value:50,children:"50 per page"})]})]})]})}),!b&&a(p,{title:"Admin List",children:[e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e("thead",{className:"bg-gray-50 dark:bg-gray-800",children:a("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Admin"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Department"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Login"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),e("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:D.length===0?e("tr",{children:a("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[e(i,{icon:"ph:users",className:"mx-auto text-gray-400 text-4xl mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Admins Found"}),e("p",{className:"text-gray-500 dark:text-gray-400",children:"No admin accounts match your current filters."})]})}):D.map(r=>a("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:a("div",{className:"flex items-center",children:[e("div",{className:"h-10 w-10 flex-shrink-0",children:e("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center",children:e(i,{icon:"ph:user",className:"text-indigo-600 dark:text-indigo-400"})})}),a("div",{className:"ml-4",children:[e("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.name}),e("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O(r.role)}`,children:r.role.replace("_"," ").toUpperCase()})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r.department||"-"}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z(r.isActive)}`,children:r.isActive?"Active":"Inactive"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r.lastLogin?new Date(r.lastLogin).toLocaleDateString():"Never"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(r.createdAt).toLocaleDateString()}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a("div",{className:"flex justify-end space-x-2",children:[e(l,{onClick:()=>S(`/admin-details/${r._id}`),className:"btn btn-sm btn-outline",children:e(i,{icon:"ph:eye"})}),(m==null?void 0:m.role)==="super_admin"&&a(P,{children:[e(l,{onClick:()=>S(`/admin-details/${r._id}?edit=true`),className:"btn btn-sm btn-outline",children:e(i,{icon:"ph:pencil"})}),r._id!==m.id&&r.role!=="super_admin"&&e(l,{onClick:()=>$(r._id,r.name),className:"btn btn-sm btn-outline-danger",disabled:E,children:e(i,{icon:"ph:trash"})})]})]})})]},r._id))})]})}),n.totalPages>1&&a("div",{className:"flex items-center justify-between px-6 py-3 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[a("div",{className:"flex-1 flex justify-between sm:hidden",children:[e(l,{onClick:()=>o("page",n.currentPage-1),disabled:!n.hasPrevPage,className:"btn btn-outline",children:"Previous"}),e(l,{onClick:()=>o("page",n.currentPage+1),disabled:!n.hasNextPage,className:"btn btn-outline",children:"Next"})]}),a("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e("div",{children:a("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing"," ",e("span",{className:"font-medium",children:(n.currentPage-1)*n.limit+1})," ","to"," ",e("span",{className:"font-medium",children:Math.min(n.currentPage*n.limit,n.totalAdmins)})," ","of"," ",e("span",{className:"font-medium",children:n.totalAdmins})," ","results"]})}),e("div",{children:a("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e(l,{onClick:()=>o("page",n.currentPage-1),disabled:!n.hasPrevPage,className:"btn btn-outline",children:e(i,{icon:"ph:chevron-left"})}),a("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm font-medium text-gray-500 dark:text-gray-300",children:[n.currentPage," of ",n.totalPages]}),e(l,{onClick:()=>o("page",n.currentPage+1),disabled:!n.hasNextPage,className:"btn btn-outline",children:e(i,{icon:"ph:chevron-right"})})]})})]})]})]})]})};export{ee as default};
