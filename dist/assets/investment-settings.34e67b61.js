import{b as G,r as u,c as r,j as e,L as v,I as d,B as m,F as k,Q as N}from"./index.93603967.js";import{C as i}from"./Card.43e3b2ea.js";import{b as B,c as I}from"./utilsApi.d760f737.js";const T=()=>{var x,f;const w=G(),[c,C]=u.exports.useState("pricing"),{data:s,isLoading:S,error:g,refetch:b}=B(),[P,{isLoading:p}]=I(),[t,h]=u.exports.useState({gold:{enabled:!0,pricePerGram:0,pricePerOunce:0},silver:{enabled:!0,pricePerGram:0,pricePerOunce:0},taxes:{gstRate:3,cgstRate:1.5,sgstRate:1.5,tcsRate:.1},handling:{goldMakingCharges:15,silverMakingCharges:8,goldWastage:2,silverWastage:3,goldPolishing:2,silverPolishing:1.5,goldHallmarking:.5,silverHallmarking:.3}});u.exports.useEffect(()=>{s!=null&&s.data&&(console.log("Investment Settings Data:",s.data),h(a=>({...a,gold:{...a.gold,enabled:s.data.goldStatus===!0||s.data.goldStatus==="active",pricePerGram:s.data.goldPrice||0},silver:{...a.silver,enabled:s.data.silverStatus===!0||s.data.silverStatus==="active",pricePerGram:s.data.silverPrice||0}})))},[s]);const l=(a,n,o)=>{h(y=>({...y,[a]:{...y[a],[n]:o}}))},F=async()=>{var a;try{const n={goldRate:t.gold.pricePerGram,goldStatus:t.gold.enabled,silverRate:t.silver.pricePerGram,silverStatus:t.silver.enabled};console.log("Saving investment settings:",n);const o=await P(n).unwrap();console.log("Save response:",o),N.success("Investment settings updated successfully"),b()}catch(n){console.error("Failed to update investment settings:",n),N.error(((a=n==null?void 0:n.data)==null?void 0:a.message)||"Failed to update investment settings")}},R=[{id:"pricing",label:"Pricing",icon:"ph:currency-dollar"}];return S?r("div",{className:"flex justify-center items-center h-64",children:[e(v,{}),e("p",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading investment settings..."})]}):g?r("div",{className:"flex flex-col justify-center items-center h-64",children:[e(d,{icon:"ph:warning-circle",className:"text-4xl text-red-500 mb-4"}),e("p",{className:"text-red-500 text-lg mb-2",children:"Failed to load investment settings"}),e("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:((x=g==null?void 0:g.data)==null?void 0:x.message)||"Unable to fetch data"}),r(m,{onClick:()=>b(),className:"btn btn-primary",children:[e(d,{icon:"ph:arrow-clockwise",className:"mr-2"}),"Retry"]})]}):r("div",{className:"space-y-6",children:[r("div",{className:"flex justify-between items-center",children:[r("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Investment Settings"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage gold and silver pricing and charges"}),((f=s==null?void 0:s.data)==null?void 0:f.updatedAt)&&r("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Last updated: ",new Date(s.data.updatedAt).toLocaleString()]})]}),r(m,{onClick:()=>w("/dashboard"),className:"btn btn-outline",children:[e(d,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Dashboard"]})]}),r("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{className:"lg:col-span-1",children:e(i,{className:"p-0",children:e("nav",{className:"space-y-1",children:R.map(a=>r("button",{onClick:()=>C(a.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c===a.id?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"}`,children:[e(d,{icon:a.icon,className:"mr-3 text-lg"}),a.label]},a.id))})})}),r("div",{className:"lg:col-span-3",children:[c==="pricing"&&r("div",{className:"space-y-6",children:[e(i,{title:"Gold Pricing",children:r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex items-center space-x-3",children:[e(d,{icon:"ph:medal",className:"text-2xl text-yellow-500"}),r("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Gold Trading"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable gold trading"})]})]}),r("div",{className:"flex items-center space-x-3",children:[e("span",{className:`text-sm font-medium ${t.gold.enabled?"text-green-600":"text-gray-500"}`,children:t.gold.enabled?"Enabled":"Disabled"}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:t.gold.enabled,onChange:a=>l("gold","enabled",a.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),t.gold.enabled&&e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gold Price (\u20B9/gram)"}),e("input",{type:"number",value:t.gold.pricePerGram,onChange:a=>l("gold","pricePerGram",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.01"})]})})]})}),e(i,{title:"Silver Pricing",children:r("div",{className:"space-y-4",children:[r("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex items-center space-x-3",children:[e(d,{icon:"ph:medal",className:"text-2xl text-gray-400"}),r("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Silver Trading"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable silver trading"})]})]}),r("div",{className:"flex items-center space-x-3",children:[e("span",{className:`text-sm font-medium ${t.silver.enabled?"text-green-600":"text-gray-500"}`,children:t.silver.enabled?"Enabled":"Disabled"}),r("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:t.silver.enabled,onChange:a=>l("silver","enabled",a.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),t.silver.enabled&&e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Silver Price (\u20B9/gram)"}),e("input",{type:"number",value:t.silver.pricePerGram,onChange:a=>l("silver","pricePerGram",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.01"})]})})]})})]}),c==="taxes"&&e(i,{title:"Tax Configuration",children:r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"GST Rate (%)"}),e("input",{type:"number",value:t.taxes.gstRate,onChange:a=>l("taxes","gstRate",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CGST Rate (%)"}),e("input",{type:"number",value:t.taxes.cgstRate,onChange:a=>l("taxes","cgstRate",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SGST Rate (%)"}),e("input",{type:"number",value:t.taxes.sgstRate,onChange:a=>l("taxes","sgstRate",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"TCS Rate (%)"}),e("input",{type:"number",value:t.taxes.tcsRate,onChange:a=>l("taxes","tcsRate",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})}),c==="charges"&&r("div",{className:"space-y-6",children:[e(i,{title:"Gold Handling Charges",children:r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Making Charges (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldMakingCharges,onChange:a=>l("handling","goldMakingCharges",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Wastage (%)"}),e("input",{type:"number",value:t.handling.goldWastage,onChange:a=>l("handling","goldWastage",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Polishing (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldPolishing,onChange:a=>l("handling","goldPolishing",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hallmarking (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldHallmarking,onChange:a=>l("handling","goldHallmarking",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})}),e(i,{title:"Silver Handling Charges",children:r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Making Charges (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverMakingCharges,onChange:a=>l("handling","silverMakingCharges",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Wastage (%)"}),e("input",{type:"number",value:t.handling.silverWastage,onChange:a=>l("handling","silverWastage",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Polishing (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverPolishing,onChange:a=>l("handling","silverPolishing",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hallmarking (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverHallmarking,onChange:a=>l("handling","silverHallmarking",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})})]}),e("div",{className:"flex justify-end space-x-3 mt-8",children:e(m,{onClick:F,disabled:p,className:"btn btn-primary",children:p?r(k,{children:[e(v,{}),e("span",{className:"ml-2",children:"Saving..."})]}):r(k,{children:[e(d,{icon:"ph:floppy-disk",className:"mr-2"}),"Save Settings"]})})})]})]})]})};export{T as default};
