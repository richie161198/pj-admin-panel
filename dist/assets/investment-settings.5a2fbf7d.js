import{b as L,r as m,c as a,j as e,L as f,I as n,B as k,C as o,F as R,Q as x}from"./index.51fda1b3.js";import{u as W,c as D,d as $,e as A}from"./utilsApi.fe011a03.js";const q=()=>{var F,S;const G=L(),[u,I]=m.exports.useState("pricing"),{data:l,isLoading:B,error:p,refetch:v}=W(),[O,{isLoading:N}]=D(),{data:g,isLoading:K,refetch:E}=$(),[M,{isLoading:w}]=A(),[y,P]=m.exports.useState(!0),[t,C]=m.exports.useState({gold:{enabled:!0,price24kt:0,price22kt:0,price18kt:0,pricePerOunce:0,premiumPercentage:9.5},silver:{enabled:!0,pricePerGram:0,price925:0,pricePerOunce:0,premiumPercentage:9.5},taxes:{gstRate:3,cgstRate:1.5,sgstRate:1.5,tcsRate:.1},handling:{goldMakingCharges:15,silverMakingCharges:8,goldWastage:2,silverWastage:3,goldPolishing:2,silverPolishing:1.5,goldHallmarking:.5,silverHallmarking:.3}});m.exports.useEffect(()=>{var r;g!=null&&g.data&&P((r=g.data.investmentEnabled)!=null?r:!0)},[g]),m.exports.useEffect(()=>{if(l!=null&&l.data){console.log("Investment Settings Data:",l.data);const r=l.data.goldPrice24kt||l.data.goldPrice||0,d=l.data.goldPrice22kt||parseFloat((r*.916).toFixed(2)),c=l.data.goldPrice18kt||parseFloat((r*.75).toFixed(2));C(i=>({...i,gold:{...i.gold,enabled:l.data.goldStatus===!0||l.data.goldStatus==="active",price24kt:r,price22kt:d,price18kt:c,premiumPercentage:l.data.goldPremiumPercentage||9.5},silver:{...i.silver,enabled:l.data.silverStatus===!0||l.data.silverStatus==="active",pricePerGram:l.data.silverPrice||0,price925:l.data.silverRate925||parseFloat(((l.data.silverPrice||0)*.925).toFixed(2)),premiumPercentage:l.data.silverPremiumPercentage||9.5}}))}},[l]);const s=(r,d,c)=>{C(i=>{const b={...i,[r]:{...i[r],[d]:c}};if(r==="gold"&&d==="price24kt"){const h=parseFloat(c)||0;b.gold.price22kt=parseFloat((h*.916).toFixed(2)),b.gold.price18kt=parseFloat((h*.75).toFixed(2))}if(r==="silver"&&d==="pricePerGram"){const h=parseFloat(c)||0;b.silver.price925=parseFloat((h*.925).toFixed(2))}return b})},j=async r=>{var c;const d=r.target.checked;try{await M({investmentEnabled:d}).unwrap(),P(d),x.success(`Investment options ${d?"enabled":"disabled"} successfully`),E()}catch(i){console.error("Failed to update investment option:",i),x.error(((c=i==null?void 0:i.data)==null?void 0:c.message)||"Failed to update investment option")}},H=async()=>{var r;try{const d={goldRate:t.gold.price24kt,goldRate24kt:t.gold.price24kt,goldRate22kt:t.gold.price22kt,goldRate18kt:t.gold.price18kt,goldStatus:t.gold.enabled,silverRate:t.silver.pricePerGram,silverRate925:t.silver.price925,silverStatus:t.silver.enabled,goldPremiumPercentage:t.gold.premiumPercentage,silverPremiumPercentage:t.silver.premiumPercentage};console.log("Saving investment settings:",d);const c=await O(d).unwrap();console.log("Save response:",c),x.success("Investment settings updated successfully"),v()}catch(d){console.error("Failed to update investment settings:",d),x.error(((r=d==null?void 0:d.data)==null?void 0:r.message)||"Failed to update investment settings")}},T=[{id:"pricing",label:"Pricing",icon:"ph:currency-dollar"}];return B?a("div",{className:"flex justify-center items-center h-64",children:[e(f,{}),e("p",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading investment settings..."})]}):p?a("div",{className:"flex flex-col justify-center items-center h-64",children:[e(n,{icon:"ph:warning-circle",className:"text-4xl text-red-500 mb-4"}),e("p",{className:"text-red-500 text-lg mb-2",children:"Failed to load investment settings"}),e("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:((F=p==null?void 0:p.data)==null?void 0:F.message)||"Unable to fetch data"}),a(k,{onClick:()=>v(),className:"btn btn-primary",children:[e(n,{icon:"ph:arrow-clockwise",className:"mr-2"}),"Retry"]})]}):a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-between items-center",children:[a("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Investment Settings"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage gold and silver pricing and charges"}),((S=l==null?void 0:l.data)==null?void 0:S.updatedAt)&&a("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Last updated: ",new Date(l.data.updatedAt).toLocaleString()]})]}),a(k,{onClick:()=>G("/dashboard"),className:"btn btn-outline",children:[e(n,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Dashboard"]})]}),e(o,{children:a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center space-x-3",children:[e(n,{icon:"ph:toggle-left",className:"text-3xl text-blue-500"}),a("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Investment Options"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable investment features globally. When disabled, all investment-related features will be unavailable."})]})]}),a("div",{className:"flex items-center space-x-3",children:[e("span",{className:`text-sm font-medium ${y?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:y?"Enabled":"Disabled"}),a("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:y,onChange:j,disabled:w,className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]}),w&&e(f,{})]})]})}),a("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{className:"lg:col-span-1",children:e(o,{className:"p-0",children:e("nav",{className:"space-y-1",children:T.map(r=>a("button",{onClick:()=>I(r.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${u===r.id?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"}`,children:[e(n,{icon:r.icon,className:"mr-3 text-lg"}),r.label]},r.id))})})}),a("div",{className:"lg:col-span-3",children:[u==="pricing"&&a("div",{className:"space-y-6",children:[e(o,{title:"Gold Pricing",children:a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center space-x-3",children:[e(n,{icon:"ph:medal",className:"text-2xl text-yellow-500"}),a("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Gold Trading"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable gold trading"})]})]}),a("div",{className:"flex items-center space-x-3",children:[e("span",{className:`text-sm font-medium ${t.gold.enabled?"text-green-600":"text-gray-500"}`,children:t.gold.enabled?"Enabled":"Disabled"}),a("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:t.gold.enabled,onChange:r=>s("gold","enabled",r.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),t.gold.enabled&&a("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("span",{className:"flex items-center gap-2",children:[e(n,{icon:"ph:medal",className:"text-yellow-500"}),"24 Karat Gold Price (\u20B9/gram)"]})}),e("input",{type:"number",value:t.gold.price24kt,onChange:r=>s("gold","price24kt",parseFloat(r.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.01",placeholder:"0.00"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Pure gold (99.9% purity)"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("span",{className:"flex items-center gap-2",children:[e(n,{icon:"ph:medal",className:"text-yellow-600"}),"22 Karat Gold Price (\u20B9/gram)",e("span",{className:"text-xs text-gray-500 ml-1"})]})}),e("input",{type:"number",value:t.gold.price22kt,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-slate-800 dark:text-white cursor-not-allowed",step:"0.01",placeholder:"0.00"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"91.67% purity"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("span",{className:"flex items-center gap-2",children:[e(n,{icon:"ph:medal",className:"text-yellow-700"}),"18 Karat Gold Price (\u20B9/gram)",e("span",{className:"text-xs text-gray-500 ml-1"})]})}),e("input",{type:"number",value:t.gold.price18kt,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-slate-800 dark:text-white cursor-not-allowed",step:"0.01",placeholder:"0.00"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"75% purity"})]})]}),t.gold.enabled&&e("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("span",{className:"flex items-center gap-2",children:"Gold Premium (%)"})}),e("input",{type:"number",value:t.gold.premiumPercentage,onChange:r=>s("gold","premiumPercentage",parseFloat(r.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1",min:"0",max:"100",placeholder:"9.5"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Premium added to gold price. Default: 9.5%."})]})})})]})}),e(o,{title:"Silver Pricing",children:a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center space-x-3",children:[e(n,{icon:"ph:medal",className:"text-2xl text-gray-400"}),a("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Silver Trading"}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable or disable silver trading"})]})]}),a("div",{className:"flex items-center space-x-3",children:[e("span",{className:`text-sm font-medium ${t.silver.enabled?"text-green-600":"text-gray-500"}`,children:t.silver.enabled?"Enabled":"Disabled"}),a("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:t.silver.enabled,onChange:r=>s("silver","enabled",r.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),t.silver.enabled&&a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("span",{className:"flex items-center gap-2",children:[e(n,{icon:"ph:medal",className:"text-gray-400"}),"Pure Silver Price (\u20B9/gram)"]})}),e("input",{type:"number",value:t.silver.pricePerGram,onChange:r=>s("silver","pricePerGram",parseFloat(r.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.01",placeholder:"0.00"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Pure silver (100% purity)"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("span",{className:"flex items-center gap-2",children:[e(n,{icon:"ph:medal",className:"text-gray-500"}),"92.5% Silver Price (\u20B9/gram)",e("span",{className:"text-xs text-gray-500 ml-1"})]})}),e("input",{type:"number",value:t.silver.price925,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-slate-800 dark:text-white cursor-not-allowed",step:"0.01",placeholder:"0.00"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Sterling silver (92.5% purity)"})]})]}),t.silver.enabled&&e("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("span",{className:"flex items-center gap-2",children:"Silver Premium (%)"})}),e("input",{type:"number",value:t.silver.premiumPercentage,onChange:r=>s("silver","premiumPercentage",parseFloat(r.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1",min:"0",max:"100",placeholder:"9.5"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Premium added to silver price. Default: 9.5%."})]})})})]})})]}),u==="taxes"&&e(o,{title:"Tax Configuration",children:a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"GST Rate (%)"}),e("input",{type:"number",value:t.taxes.gstRate,onChange:r=>s("taxes","gstRate",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CGST Rate (%)"}),e("input",{type:"number",value:t.taxes.cgstRate,onChange:r=>s("taxes","cgstRate",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SGST Rate (%)"}),e("input",{type:"number",value:t.taxes.sgstRate,onChange:r=>s("taxes","sgstRate",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"TCS Rate (%)"}),e("input",{type:"number",value:t.taxes.tcsRate,onChange:r=>s("taxes","tcsRate",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})}),u==="charges"&&a("div",{className:"space-y-6",children:[e(o,{title:"Gold Handling Charges",children:a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Making Charges (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldMakingCharges,onChange:r=>s("handling","goldMakingCharges",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Wastage (%)"}),e("input",{type:"number",value:t.handling.goldWastage,onChange:r=>s("handling","goldWastage",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Polishing (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldPolishing,onChange:r=>s("handling","goldPolishing",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hallmarking (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.goldHallmarking,onChange:r=>s("handling","goldHallmarking",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})}),e(o,{title:"Silver Handling Charges",children:a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Making Charges (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverMakingCharges,onChange:r=>s("handling","silverMakingCharges",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Wastage (%)"}),e("input",{type:"number",value:t.handling.silverWastage,onChange:r=>s("handling","silverWastage",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Polishing (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverPolishing,onChange:r=>s("handling","silverPolishing",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hallmarking (\u20B9/gram)"}),e("input",{type:"number",value:t.handling.silverHallmarking,onChange:r=>s("handling","silverHallmarking",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",step:"0.1"})]})]})})]}),e("div",{className:"flex justify-end space-x-3 mt-8",children:e(k,{onClick:H,disabled:N,className:"btn btn-primary",children:N?a(R,{children:[e(f,{}),e("span",{className:"ml-2",children:"Saving..."})]}):a(R,{children:[e(n,{icon:"ph:floppy-disk",className:"mr-2"}),"Save Settings"]})})})]})]})]})};export{q as default};
