import{a7 as v,r as p,an as I,b as k,ao as q,c as j,j as s,I as C,B as N,ap as R,Q as t}from"./index.cccf3715.js";import{I as g}from"./InputGroup.bf11dd38.js";import{u as B}from"./index.esm.bdc47664.js";import{c as F,a as f,o as A}from"./object.89a9ddca.js";import{C as D}from"./Checkbox.678caea5.js";const E=F({email:f().email("Invalid email").required("Email is Required"),password:f().required("Password is Required")}).required(),z=()=>{const{login:b}=v(),[r,i]=p.exports.useState(!1),h=I(),{register:n,reset:G,formState:{errors:l},handleSubmit:L}=B({resolver:A(E),mode:"all"}),w=k(),x=q(),y=async c=>{var m,d,u;console.log("Login data:",c,"Remember me:",a),i(!0);try{const e=await b(c,a);if(e.success){h(R(e.data.admin)),t.success("Login Successful");const o=((d=(m=x.state)==null?void 0:m.from)==null?void 0:d.pathname)||"/dashboard";w(o,{replace:!0})}else t.error(e.error||"Login failed")}catch(e){console.error("Login error:",e);const o=((u=e==null?void 0:e.data)==null?void 0:u.message)||(e==null?void 0:e.message)||"Login failed";t.error(o)}finally{i(!1)}},[a,S]=p.exports.useState(!1);return j("form",{onSubmit:L(y),className:"space-y-4 ",children:[s(g,{name:"email",type:"email",label:"email",placeholder:"email",prepend:"@",register:n,error:l.email,merged:!0,disabled:r}),s(g,{name:"password",label:"password",type:"password",placeholder:"password",prepend:s(C,{icon:"ph:lock-simple"}),register:n,error:l.password,merged:!0,disabled:r}),s("div",{className:"flex justify-between",children:s(D,{value:a,onChange:()=>S(!a),label:"Remember me"})}),s(N,{type:"submit",text:"Sign in",className:"btn btn-primary block w-full text-center ",isLoading:r})]})};export{z as L};
