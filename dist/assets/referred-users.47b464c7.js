import{b as w,r as R,j as e,L as C,c as t,B as o,I as s,C as d,F as j}from"./index.ce738da1.js";import{B as I}from"./Badge.eb576f68.js";import{a as U,b as B}from"./userApi.c0c2fdb5.js";const F=()=>{var g,p;const f=w(),[x,y]=R.exports.useState({page:1,limit:20,userId:""}),{data:c,isLoading:N,refetch:V}=U(x),{data:m,isLoading:b}=B(),h=((g=c==null?void 0:c.data)==null?void 0:g.users)||[],a=((p=c==null?void 0:c.data)==null?void 0:p.pagination)||{},i=(m==null?void 0:m.data)||{},n=(r,l)=>{y(v=>({...v,[r]:l,page:1}))},u=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=r=>r.kycVerified?{text:"Verified",color:"success"}:r.panVerified?{text:"PAN Verified",color:"info"}:r.mobileVerified?{text:"Mobile Verified",color:"warning"}:{text:"Not Verified",color:"danger"};return N||b?e("div",{className:"flex justify-center items-center h-64",children:e(C,{})}):t("div",{className:"space-y-6",children:[t("div",{className:"flex justify-between items-center",children:[t("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Referred Users"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"View users who registered using referral codes"})]}),t(o,{onClick:()=>f("/dashboard"),className:"btn btn-outline",children:[e(s,{icon:"ph:arrow-left",className:"mr-2"}),"Back to Dashboard"]})]}),i.overview&&t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e(d,{className:"p-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Referred Users"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.overview.totalReferredUsers||0})]}),e(s,{icon:"ph:users",className:"text-2xl text-blue-500"})]})}),e(d,{className:"p-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"KYC Verified"}),e("p",{className:"text-2xl font-bold text-green-600",children:i.overview.totalKycVerified||0})]}),e(s,{icon:"ph:check-circle",className:"text-2xl text-green-500"})]})}),e(d,{className:"p-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Points Given"}),e("p",{className:"text-2xl font-bold text-purple-600",children:i.overview.totalReferralPointsGiven||0})]}),e(s,{icon:"ph:coins",className:"text-2xl text-purple-500"})]})}),e(d,{className:"p-4",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Referrals"}),e("p",{className:"text-2xl font-bold text-orange-600",children:i.overview.totalReferralCount||0})]}),e(s,{icon:"ph:user-plus",className:"text-2xl text-orange-500"})]})})]}),i.topReferrers&&i.topReferrers.length>0&&e(d,{title:"Top Referrers",className:"p-4",children:e("div",{className:"space-y-3",children:i.topReferrers.map((r,l)=>t("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:l+1}),t("div",{children:[e("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]}),t("div",{className:"flex items-center space-x-4",children:[t("div",{className:"text-right",children:[e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Referrals"}),e("p",{className:"font-bold text-gray-900 dark:text-white",children:r.referralCount||0})]}),t("div",{className:"text-right",children:[e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Points"}),e("p",{className:"font-bold text-gray-900 dark:text-white",children:r.referralPoints||0})]})]})]},r._id))})}),e(d,{className:"p-4",children:t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Referring User ID"}),e("input",{type:"text",value:x.userId,onChange:r=>n("userId",r.target.value),placeholder:"Enter user ID...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white text-sm"})]}),e("div",{className:"flex items-end",children:e(o,{onClick:()=>n("userId",""),className:"btn btn-outline",children:"Clear Filter"})})]})}),e(d,{title:"Referred Users List",className:"p-4",children:h.length===0?t("div",{className:"text-center py-12",children:[e(s,{icon:"ph:users",className:"text-6xl text-gray-400 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No referred users found"}),e("p",{className:"text-gray-500 dark:text-gray-400",children:x.userId?"No users found for this referring user":"No users have been referred yet"})]}):t(j,{children:[e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{children:t("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"User Details"}),e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"User ID"}),e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Referral Points"}),e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"KYC Status"}),e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Referred By"}),e("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Registered"})]})}),e("tbody",{children:h.map(r=>{const l=k(r);return t("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e("td",{className:"py-3 px-4",children:t("div",{children:[e("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email}),r.phone&&e("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:r.phone})]})}),e("td",{className:"py-3 px-4",children:e("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:r.userId})}),e("td",{className:"py-3 px-4",children:t("div",{className:"flex items-center space-x-2",children:[e(s,{icon:"ph:coins",className:"text-yellow-500"}),e("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.referralPoints||0})]})}),e("td",{className:"py-3 px-4",children:t(I,{color:l.color,size:"sm",children:[e(s,{icon:l.color==="success"?"ph:check-circle":l.color==="info"?"ph:info":l.color==="warning"?"ph:clock":"ph:x-circle",className:"mr-1"}),l.text]})}),e("td",{className:"py-3 px-4",children:r.referredBy?t("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:r.referredBy.name}),e("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.referredBy.email}),t("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Code: ",r.referredBy.referralCode]})]}):e("span",{className:"text-gray-400 dark:text-gray-500",children:"N/A"})}),e("td",{className:"py-3 px-4",children:e("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u(r.createdAt)})})]},r._id)})})]})}),a.pages>1&&t("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(a.page-1)*a.limit+1," to"," ",Math.min(a.page*a.limit,a.total)," of"," ",a.total," users"]}),t("div",{className:"flex items-center space-x-2",children:[t(o,{onClick:()=>n("page",a.page-1),disabled:a.page===1,className:"btn btn-sm btn-outline",children:[e(s,{icon:"ph:arrow-left",className:"mr-1"}),"Previous"]}),t("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",a.page," of ",a.pages]}),t(o,{onClick:()=>n("page",a.page+1),disabled:a.page>=a.pages,className:"btn btn-sm btn-outline",children:["Next",e(s,{icon:"ph:arrow-right",className:"ml-1"})]})]})]})]})})]})};export{F as default};
