import{d as Fe,b as Ie,r as y,j as e,L as Le,c as a,B as b,I as u,C as S,F as ne,Q as d}from"./index.ce738da1.js";import{F as Me}from"./Fileinput.12f78204.js";import{u as _e}from"./userApi.c0c2fdb5.js";import{a as Pe}from"./imageApi.7faabe19.js";const qe=Fe.injectEndpoints({endpoints:m=>({createNotification:m.mutation({query:o=>({url:"/notifications/admin/notifications",method:"POST",body:o}),invalidatesTags:["Notification"]}),getAllNotifications:m.query({query:(o={})=>{const h=new URLSearchParams;return Object.keys(o).forEach(g=>{o[g]!==void 0&&o[g]!==""&&h.append(g,o[g])}),`/notifications/admin/notifications?${h.toString()}`},providesTags:["Notification"]}),getNotificationById:m.query({query:o=>`/notifications/admin/notifications/${o}`,providesTags:(o,h,g)=>[{type:"Notification",id:g}]}),updateNotification:m.mutation({query:({id:o,...h})=>({url:`/notifications/admin/notifications/${o}`,method:"PUT",body:h}),invalidatesTags:(o,h,{id:g})=>[{type:"Notification",id:g},"Notification"]}),deleteNotification:m.mutation({query:o=>({url:`/notifications/admin/notifications/${o}`,method:"DELETE"}),invalidatesTags:["Notification"]}),sendNotification:m.mutation({query:o=>({url:`/notifications/admin/notifications/${o}/send`,method:"POST"}),invalidatesTags:["Notification"]}),getNotificationStats:m.query({query:()=>"/notifications/admin/notifications/stats",providesTags:["Notification"]}),registerDeviceToken:m.mutation({query:o=>({url:"/notifications/notifications/register-token",method:"POST",body:o})}),updateNotificationPreferences:m.mutation({query:o=>({url:"/notifications/notifications/preferences",method:"PUT",body:o})})})}),{useCreateNotificationMutation:$e,useGetAllNotificationsQuery:De,useGetNotificationByIdQuery:ze,useUpdateNotificationMutation:je,useDeleteNotificationMutation:Be,useSendNotificationMutation:Re,useGetNotificationStatsQuery:Ee,useRegisterDeviceTokenMutation:We,useUpdateNotificationPreferencesMutation:Ye}=qe,Je=()=>{var J,K,V,X,Z,ee,te,ae,re,se,le,ie;Ie();const[m,o]=y.exports.useState("list"),[h,g]=y.exports.useState(!1),[oe,F]=y.exports.useState(!1),[de,I]=y.exports.useState(null),[L,C]=y.exports.useState([]),[q,ce]=y.exports.useState(""),[ue,N]=y.exports.useState(null),[$,v]=y.exports.useState(null),[B,R]=y.exports.useState(!1),[U,M]=y.exports.useState({status:"",type:"",priority:"",search:""}),{data:D,isLoading:ge,refetch:k}=De({page:1,limit:50,...U}),{data:p}=Ee(),{data:c,isLoading:E,error:x}=_e();console.log("Users data:",c),console.log("Is loading users:",E),console.log("Users error:",x),console.log("Users data details:",c==null?void 0:c.details),console.log("Users data length:",(J=c==null?void 0:c.details)==null?void 0:J.length);const[O,{isLoading:_}]=$e(),[me,{isLoading:G}]=je(),[he,{isLoading:pe}]=Be(),[Q,{isLoading:P}]=Re(),[fe]=Pe(),[n,A]=y.exports.useState({title:"",message:"",type:"general",priority:"normal",targetAudience:"all",targetUsers:[],targetSegment:"all_users",imageUrl:"",scheduledAt:"",metadata:{}}),w=t=>{const{name:s,value:r}=t.target;A(l=>({...l,[s]:r}))},ye=async t=>{var r,l;const s=t.target.files[0];if(!!s){if(!s.type.startsWith("image/")){d.error("Please select a valid image file");return}if(s.size>5*1024*1024){d.error("Image size should be less than 5MB");return}N(s),v(URL.createObjectURL(s)),R(!0);try{const i=new FormData;i.append("image",s);const f=await fe(i).unwrap();f.success&&((r=f.data)==null?void 0:r.url)?(A(j=>({...j,imageUrl:f.data.url})),d.success("Image uploaded successfully")):(d.error("Failed to upload image"),N(null),v(null))}catch(i){console.error("Image upload error:",i),d.error(((l=i==null?void 0:i.data)==null?void 0:l.message)||"Failed to upload image"),N(null),v(null)}finally{R(!1)}}},H=()=>{N(null),v(null),A(t=>({...t,imageUrl:""}))},be=t=>{C(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},xe=()=>{c!=null&&c.details&&C(c.details.map(t=>t._id))},Ne=()=>{C([])},ve=async t=>{var r;if(t.preventDefault(),console.log("Creating notification with data:",n),!n.title||!n.message){d.error("Title and message are required");return}const s={...n,scheduledAt:n.scheduledAt?W(n.scheduledAt):null,targetUsers:n.targetAudience==="specific_users"?L:[]};try{const l=await O(s).unwrap();console.log("Create notification response:",l),l.status?(d.success("Notification created successfully"),g(!1),T(),C([]),k()):d.error(l.message||"Failed to create notification")}catch(l){console.error("Create notification error:",l);const i=((r=l==null?void 0:l.data)==null?void 0:r.message)||(l==null?void 0:l.message)||"Failed to create notification";d.error(i)}},ke=async()=>{var s,r,l;if(console.log("Creating and sending notification immediately:",n),!n.title||!n.message){d.error("Title and message are required");return}const t={...n,scheduledAt:null,targetUsers:n.targetAudience==="specific_users"?L:[]};try{const i=await O(t).unwrap();if(console.log("Create notification response:",i),i.status&&((s=i.data)==null?void 0:s._id)){const f=await Q(i.data._id).unwrap();f.status?(d.success(`Notification sent successfully to ${((r=f.data)==null?void 0:r.sentCount)||0} devices`),g(!1),T(),C([]),k()):(d.error(f.message||"Notification created but failed to send"),k())}else d.error(i.message||"Failed to create notification")}catch(i){console.error("Create and send notification error:",i);const f=((l=i==null?void 0:i.data)==null?void 0:l.message)||(i==null?void 0:i.message)||"Failed to create and send notification";d.error(f),k()}},we=async t=>{var s;t.preventDefault();try{const r={...n,scheduledAt:n.scheduledAt?W(n.scheduledAt):null};(await me({id:de._id,...r}).unwrap()).status&&(d.success("Notification updated successfully"),F(!1),I(null),T(),k())}catch(r){console.error("Update notification error:",r);const l=((s=r==null?void 0:r.data)==null?void 0:s.message)||(r==null?void 0:r.message)||"Failed to update notification";d.error(l)}},Se=async t=>{var s;if(window.confirm("Are you sure you want to delete this notification?"))try{(await he(t).unwrap()).status&&(d.success("Notification deleted successfully"),k())}catch(r){console.error("Delete notification error:",r);const l=((s=r==null?void 0:r.data)==null?void 0:s.message)||(r==null?void 0:r.message)||"Failed to delete notification";d.error(l)}},z=async t=>{var s;if(window.confirm("Are you sure you want to send this notification?"))try{const r=await Q(t).unwrap();r.status&&(d.success(`Notification sent successfully to ${r.data.sentCount} devices`),k())}catch(r){console.error("Send notification error:",r);const l=((s=r==null?void 0:r.data)==null?void 0:s.message)||(r==null?void 0:r.message)||"Failed to send notification";d.error(l)}},Ce=t=>{if(!t)return"";const s=new Date(t),r=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0"),f=String(s.getHours()).padStart(2,"0"),j=String(s.getMinutes()).padStart(2,"0");return`${r}-${l}-${i}T${f}:${j}`},W=t=>t?new Date(t).toISOString():null,Y=t=>{I(t),A({title:t.title,message:t.message,type:t.type,priority:t.priority,targetAudience:t.targetAudience,targetUsers:t.targetUsers||[],targetSegment:t.targetSegment,imageUrl:t.imageUrl||"",scheduledAt:Ce(t.scheduledAt),metadata:t.metadata||{}}),t.imageUrl?(v(t.imageUrl),N(null)):(v(null),N(null)),F(!0)},T=()=>{A({title:"",message:"",type:"general",priority:"normal",targetAudience:"all",targetUsers:[],targetSegment:"all_users",imageUrl:"",scheduledAt:"",metadata:{}}),N(null),v(null)},Ue=t=>{const s={draft:{color:"bg-gray-100 text-gray-800",label:"Draft"},scheduled:{color:"bg-blue-100 text-blue-800",label:"Scheduled"},sent:{color:"bg-green-100 text-green-800",label:"Sent"},failed:{color:"bg-red-100 text-red-800",label:"Failed"},cancelled:{color:"bg-yellow-100 text-yellow-800",label:"Cancelled"}},r=s[t]||s.draft;return e("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.color}`,children:r.label})},Ae=t=>{const s={low:{color:"bg-gray-100 text-gray-800",label:"Low"},normal:{color:"bg-blue-100 text-blue-800",label:"Normal"},high:{color:"bg-orange-100 text-orange-800",label:"High"},urgent:{color:"bg-red-100 text-red-800",label:"Urgent"}},r=s[t]||s.normal;return e("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.color}`,children:r.label})},Te=[{id:"list",label:"All Notifications",icon:"ph:list"},{id:"stats",label:"Statistics",icon:"ph:chart-bar"}];return ge?e("div",{className:"flex justify-center items-center h-64",children:e(Le,{})}):a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-between items-center",children:[a("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Push Notifications"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and send push notifications to users"})]}),a(b,{onClick:()=>{console.log("Create Notification button clicked"),g(!0)},className:"btn btn-primary",children:[e(u,{icon:"ph:plus",className:"mr-2"}),"Create Notification"]})]}),e("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:Te.map(t=>a("button",{onClick:()=>o(t.id),className:`flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ${m===t.id?"bg-white text-blue-700 dark:bg-gray-700 dark:text-blue-400 shadow-sm":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"}`,children:[e(u,{icon:t.icon,className:"mr-2"}),t.label]},t.id))}),m==="stats"&&a("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(S,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-blue-100 rounded-lg",children:e(u,{icon:"ph:bell",className:"text-2xl text-blue-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Notifications"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((V=(K=p==null?void 0:p.data)==null?void 0:K.overview)==null?void 0:V.totalNotifications)||0})]})]})})}),e(S,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-green-100 rounded-lg",children:e(u,{icon:"ph:check-circle",className:"text-2xl text-green-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sent"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((Z=(X=p==null?void 0:p.data)==null?void 0:X.overview)==null?void 0:Z.sentNotifications)||0})]})]})})}),e(S,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e(u,{icon:"ph:clock",className:"text-2xl text-yellow-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Scheduled"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((te=(ee=p==null?void 0:p.data)==null?void 0:ee.overview)==null?void 0:te.scheduledNotifications)||0})]})]})})}),e(S,{children:e("div",{className:"p-6",children:a("div",{className:"flex items-center",children:[e("div",{className:"p-2 bg-gray-100 rounded-lg",children:e(u,{icon:"ph:file-text",className:"text-2xl text-gray-600"})}),a("div",{className:"ml-4",children:[e("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Draft"}),e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((re=(ae=p==null?void 0:p.data)==null?void 0:ae.overview)==null?void 0:re.draftNotifications)||0})]})]})})})]}),m==="list"&&a("div",{className:"space-y-6",children:[e(S,{children:e("div",{className:"p-6",children:a("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a("select",{value:U.status,onChange:t=>M(s=>({...s,status:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Status"}),e("option",{value:"draft",children:"Draft"}),e("option",{value:"scheduled",children:"Scheduled"}),e("option",{value:"sent",children:"Sent"}),e("option",{value:"failed",children:"Failed"}),e("option",{value:"cancelled",children:"Cancelled"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),a("select",{value:U.type,onChange:t=>M(s=>({...s,type:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Types"}),e("option",{value:"general",children:"General"}),e("option",{value:"promotional",children:"Promotional"}),e("option",{value:"order_update",children:"Order Update"}),e("option",{value:"system",children:"System"}),e("option",{value:"security",children:"Security"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a("select",{value:U.priority,onChange:t=>M(s=>({...s,priority:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"",children:"All Priorities"}),e("option",{value:"low",children:"Low"}),e("option",{value:"normal",children:"Normal"}),e("option",{value:"high",children:"High"}),e("option",{value:"urgent",children:"Urgent"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e("input",{type:"text",value:U.search,onChange:t=>M(s=>({...s,search:t.target.value})),placeholder:"Search notifications...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]})})}),e(S,{children:e("div",{className:"p-6",children:e("div",{className:"space-y-4",children:(le=(se=D==null?void 0:D.data)==null?void 0:se.notifications)==null?void 0:le.map(t=>e("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a("div",{className:"flex items-start justify-between",children:[a("div",{className:"flex-1",children:[a("div",{className:"flex items-center space-x-3 mb-2",children:[e("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t.title}),Ue(t.status),Ae(t.priority)]}),e("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:t.message}),a("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a("span",{children:["Type: ",t.type]}),a("span",{children:["Target: ",t.targetAudience]}),t.createdBy&&a("span",{className:"flex items-center",children:[e(u,{icon:"ph:user",className:"mr-1"}),"Created by: ",t.createdBy.name||t.createdBy.email||"Unknown"]}),a("span",{children:["Created: ",new Date(t.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]}),t.sentAt&&a("span",{children:["Sent: ",new Date(t.sentAt).toLocaleString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),t.sentCount>0&&a("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["Sent to ",t.sentCount," devices",t.deliveredCount>0&&a("span",{children:[" \u2022 Delivered: ",t.deliveredCount]}),t.clickedCount>0&&a("span",{children:[" \u2022 Clicks: ",t.clickedCount]})]})]}),a("div",{className:"flex items-center space-x-2",children:[t.status==="draft"&&a(ne,{children:[a(b,{onClick:()=>Y(t),className:"btn btn-sm btn-outline",children:[e(u,{icon:"ph:pencil",className:"mr-1"}),"Edit"]}),a(b,{onClick:()=>z(t._id),disabled:P,className:"btn btn-sm btn-primary",children:[e(u,{icon:"ph:paper-plane",className:"mr-1"}),"Send"]})]}),t.status==="scheduled"&&a(ne,{children:[a(b,{onClick:()=>Y(t),className:"btn btn-sm btn-outline",children:[e(u,{icon:"ph:pencil",className:"mr-1"}),"Edit"]}),a(b,{onClick:()=>z(t._id),disabled:P,className:"btn btn-sm btn-primary",children:[e(u,{icon:"ph:paper-plane-tilt",className:"mr-1"}),"Send now"]})]}),a(b,{onClick:()=>Se(t._id),disabled:pe,className:"btn btn-sm btn-outline-danger",children:[e(u,{icon:"ph:trash",className:"mr-1"}),"Delete"]})]})]})},t._id))})})})]}),(h||oe)&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[a("div",{className:"flex justify-between items-center mb-6",children:[e("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"Create Notification":"Edit Notification"}),e(b,{onClick:()=>{g(!1),F(!1),I(null),T()},className:"btn btn-outline",children:e(u,{icon:"ph:x"})})]}),a("form",{onSubmit:h?ve:we,children:[a("div",{className:"space-y-4",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e("input",{type:"text",name:"title",value:n.title,onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),a("select",{name:"type",value:n.type,onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"general",children:"General"}),e("option",{value:"promotional",children:"Promotional"}),e("option",{value:"order_update",children:"Order Update"}),e("option",{value:"system",children:"System"}),e("option",{value:"security",children:"Security"})]})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message *"}),e("textarea",{name:"message",value:n.message,onChange:w,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",required:!0})]}),a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a("select",{name:"priority",value:n.priority,onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"low",children:"Low"}),e("option",{value:"normal",children:"Normal"}),e("option",{value:"high",children:"High"}),e("option",{value:"urgent",children:"Urgent"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Audience"}),a("select",{name:"targetAudience",value:n.targetAudience,onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e("option",{value:"all",children:"All Users"}),e("option",{value:"specific_users",children:"Specific Users"}),e("option",{value:"user_segment",children:"User Segment"})]})]})]}),n.targetAudience==="specific_users"&&a("div",{className:"mt-4",children:[a("div",{className:"flex justify-between items-center mb-3",children:[a("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select Users (",L.length," selected)"]}),a("div",{className:"space-x-2",children:[e("button",{type:"button",onClick:xe,className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Select All"}),e("button",{type:"button",onClick:Ne,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Deselect All"})]})]}),e("div",{className:"mb-3",children:e("input",{type:"text",placeholder:"Search users...",value:q,onChange:t=>ce(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})}),e("div",{className:"max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg",children:E?e("div",{className:"p-4 text-center text-gray-500",children:"Loading users..."}):x?a("div",{className:"p-4 text-center text-red-500",children:["Error loading users: ",((ie=x==null?void 0:x.data)==null?void 0:ie.message)||(x==null?void 0:x.message)||"Unknown error"]}):(c==null?void 0:c.details)&&c.details.length>0?c.details.filter(t=>{var s,r;return((s=t.name)==null?void 0:s.toLowerCase().includes(q.toLowerCase()))||((r=t.email)==null?void 0:r.toLowerCase().includes(q.toLowerCase()))}).map(t=>a("div",{className:"flex items-center p-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e("input",{type:"checkbox",id:`user-${t._id}`,checked:L.includes(t._id),onChange:()=>be(t._id),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a("div",{className:"flex-1",children:[e("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name||"No Name"}),e("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]},t._id)):e("div",{className:"p-4 text-center text-gray-500",children:c?"No users found":"Failed to load users"})})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Scheduled At"}),e("input",{type:"datetime-local",name:"scheduledAt",value:n.scheduledAt,onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification Image"}),a("div",{className:"space-y-3",children:[e(Me,{selectedFile:ue,onChange:ye,preview:!0,id:"notification-image-upload",children:e(b,{div:!0,icon:"ph:upload",text:B?"Uploading...":"Upload Image",iconClass:"text-xl",className:"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 text-gray-600 btn-sm",disabled:B})}),$&&a("div",{className:"relative inline-block",children:[e("div",{className:"w-48 h-48 border-2 border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:e("img",{src:$,alt:"Notification preview",className:"w-full h-full object-cover"})}),e("button",{type:"button",onClick:H,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",title:"Remove image",children:e(u,{icon:"ph:x",className:"text-sm"})})]}),n.imageUrl&&!$&&a("div",{className:"mt-2",children:[e("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Image URL:"}),a("div",{className:"flex items-center space-x-2",children:[e("input",{type:"text",value:n.imageUrl,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800 text-sm"}),e("button",{type:"button",onClick:H,className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Remove"})]})]})]})]})]}),a("div",{className:"flex justify-end space-x-3 mt-6",children:[e(b,{type:"button",onClick:()=>{g(!1),F(!1),I(null),T()},className:"btn btn-outline",children:"Cancel"}),e(b,{type:"submit",disabled:h?_:G,className:"btn btn-primary",children:h?_?"Creating...":"Save as Draft":G?"Updating...":"Update"}),h&&a(b,{type:"button",onClick:ke,disabled:_||P,className:"btn btn-success",children:[e(u,{icon:"ph:paper-plane",className:"mr-2"}),_||P?"Sending...":"Send Now"]})]})]})]})})]})};export{Je as default};
