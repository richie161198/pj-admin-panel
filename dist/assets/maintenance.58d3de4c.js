import{r as l,a8 as U,a9 as k,j as e,c as n,Q as v}from"./index.ce738da1.js";const P=()=>{const[d,o]=l.exports.useState(!1),[m,u]=l.exports.useState(""),[g,p]=l.exports.useState(""),[r,f]=l.exports.useState(""),[h,b]=l.exports.useState("emergency"),[I,N]=l.exports.useState(["all"]),[j,M]=l.exports.useState(""),[C,w]=l.exports.useState(""),{data:s,isLoading:S,refetch:x}=U(),[E,{isLoading:i}]=k();l.exports.useEffect(()=>{if(s!=null&&s.data){const a=s.data;o(a.isMaintenanceMode||!1),u(a.maintenanceMessage||""),p(a.maintenanceTitle||""),f(a.estimatedEndTime?new Date(a.estimatedEndTime).toISOString().slice(0,16):""),b(a.maintenanceType||"emergency"),N(a.affectedServices||["all"]),M(a.allowedIPs?a.allowedIPs.join(", "):""),w(a.allowedUserIds?a.allowedUserIds.join(", "):"")}},[s]);const T=async a=>{var y;a.preventDefault();try{const t={isMaintenanceMode:d,maintenanceMessage:m,maintenanceTitle:g,estimatedEndTime:r?new Date(r).toISOString():null,maintenanceType:h};console.log("Updating maintenance with data:",t);const c=await E(t).unwrap();console.log("Maintenance update response:",c),c.status&&(v.success(c.message),x())}catch(t){console.error("Error updating maintenance:",t),console.error("Error details:",{status:t==null?void 0:t.status,data:t==null?void 0:t.data,message:t==null?void 0:t.message}),v.error(((y=t==null?void 0:t.data)==null?void 0:y.message)||(t==null?void 0:t.message)||"Failed to update maintenance status")}};return S?e("div",{className:"flex items-center justify-center h-64",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e("div",{className:"p-6",children:e("div",{className:"max-w-4xl mx-auto",children:n("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n("div",{className:"flex items-center justify-between mb-6",children:[n("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900",children:"App Maintenance"}),e("p",{className:"text-gray-600 mt-1",children:"Control app maintenance mode and settings"})]}),e("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${d?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:d?"Maintenance ON":"Maintenance OFF"})]}),n("form",{onSubmit:T,className:"space-y-6",children:[e("div",{className:"bg-gray-50 p-4 rounded-lg",children:n("div",{className:"flex items-center justify-between",children:[n("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"App Maintenance Mode"}),e("p",{className:"text-sm text-gray-600",children:"Enable or disable app maintenance mode"})]}),n("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:a=>o(a.target.checked)}),e("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),d&&n("div",{className:"space-y-4",children:[n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Title"}),e("input",{type:"text",value:g,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"System Maintenance"})]}),n("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Type"}),n("select",{value:h,onChange:a=>b(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e("option",{value:"emergency",children:"Emergency"}),e("option",{value:"scheduled",children:"Scheduled"}),e("option",{value:"update",children:"Update"})]})]})]}),n("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Message"}),e("textarea",{value:m,onChange:a=>u(a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"We are currently performing maintenance. Please try again later."})]}),n("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated End Time"}),e("input",{type:"datetime-local",value:r,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n("div",{className:"flex justify-end space-x-4",children:[e("button",{type:"button",onClick:()=>x(),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e("button",{type:"submit",disabled:i,className:`px-6 py-2 rounded-md font-medium transition-colors ${d?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"} ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Updating...":d?"Enable Maintenance":"Disable Maintenance"})]})]}),(s==null?void 0:s.data)&&n("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Status"}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n("div",{children:[e("span",{className:"font-medium text-gray-700",children:"Status:"}),e("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${s.data.isMaintenanceMode?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:s.data.isMaintenanceMode?"Maintenance ON":"Maintenance OFF"})]}),s.data.lastUpdated&&n("div",{children:[e("span",{className:"font-medium text-gray-700",children:"Last Updated:"}),e("span",{className:"ml-2 text-gray-600",children:new Date(s.data.lastUpdated).toLocaleString()})]})]})]})]})})})};export{P as default};
